<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joshua Wilson Black">
<meta name="author" content="Lynn Clark">
<meta name="author" content="Gia Hurring">
<meta name="dcterms.date" content="2025-12-19">

<title>SM1: Formant tracking, preprocessing, and normalisation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="SM1_formants_files/libs/clipboard/clipboard.min.js"></script>
<script src="SM1_formants_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="SM1_formants_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="SM1_formants_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="SM1_formants_files/libs/quarto-html/popper.min.js"></script>
<script src="SM1_formants_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SM1_formants_files/libs/quarto-html/anchor.min.js"></script>
<link href="SM1_formants_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SM1_formants_files/libs/quarto-html/quarto-syntax-highlighting-6c39e09fdfc3dc53c1f951cfe104e44f.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="SM1_formants_files/libs/quarto-html/quarto-syntax-highlighting-dark-657fc1361c91eea4fb4e96764eaad9ee.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="SM1_formants_files/libs/quarto-html/quarto-syntax-highlighting-6c39e09fdfc3dc53c1f951cfe104e44f.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="SM1_formants_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SM1_formants_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SM1_formants_files/libs/bootstrap/bootstrap-9a16e0fc44bbca08a9c447a26652f23a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="SM1_formants_files/libs/bootstrap/bootstrap-dark-11e563a5e7a363d449101c6864de1966.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<link href="SM1_formants_files/libs/bootstrap/bootstrap-9a16e0fc44bbca08a9c447a26652f23a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="SM1_formants_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="SM1_formants_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="SM1_formants_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: #3E3C3D;
      }

      .quarto-title-block .quarto-title-banner {
        color: #3E3C3D;
background: #e8e4e4;
      }
</style>
<script src="SM1_formants_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="SM1_formants_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="SM1_formants_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="SM1_formants_files/libs/d3-3.3.8/d3.min.js"></script>
<script src="SM1_formants_files/libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="SM1_formants_files/libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="SM1_formants_files/libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="SM1_formants_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="SM1_formants_files/libs/chromatography-0.1/chromatography.js"></script>
<script src="SM1_formants_files/libs/DiagrammeR-binding-1.0.11/DiagrammeR.js"></script>
<link rel="shortcut icon" href="images/fav.png">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="theme.css">
</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <img src="images/nzilbb-uc-marsden.svg" width="70%" ,="" style="display: block; margin-bottom: 5%">
    <div class="quarto-title column-body">
      <h1 class="title">SM1: Formant tracking, preprocessing, and normalisation</h1>
            <p class="subtitle lead">Supplementary material for “Acquiring a vowel system in motion.”</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliations</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Joshua Wilson Black <a href="mailto:joshua.black@canterbury.ac.nz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-8272-5763" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              New Zealand Institute for Language, Brain and Behaviour, University of Canterbury
            </p>
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author">Lynn Clark <a href="mailto:lynn.clark@canterbury.ac.nz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-3282-6555" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Department of Linguistics, University of Canterbury
            </p>
          <p class="affiliation">
              New Zealand Institute for Language, Brain and Behaviour, University of Canterbury
            </p>
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author">Gia Hurring <a href="mailto:gia.hurring@canterbury.ac.nz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-1575-6073" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              New Zealand Institute for Language, Brain and Behaviour, University of Canterbury
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">19 December 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">1</span> Overview</a></li>
  <li><a href="#packages-and-renv-environment" id="toc-packages-and-renv-environment" class="nav-link" data-scroll-target="#packages-and-renv-environment"><span class="header-section-number">2</span> Packages and <code>renv</code> environment</a></li>
  <li><a href="#labb-cat-extraction" id="toc-labb-cat-extraction" class="nav-link" data-scroll-target="#labb-cat-extraction"><span class="header-section-number">3</span> LaBB-CAT extraction</a></li>
  <li><a href="#formant-tracking-with-fasttrack" id="toc-formant-tracking-with-fasttrack" class="nav-link" data-scroll-target="#formant-tracking-with-fasttrack"><span class="header-section-number">4</span> Formant tracking with FastTrack</a>
  <ul>
  <li><a href="#sec-labbcat-int" id="toc-sec-labbcat-int" class="nav-link" data-scroll-target="#sec-labbcat-int"><span class="header-section-number">4.1</span> LaBB-CAT integration</a></li>
  <li><a href="#sec-local" id="toc-sec-local" class="nav-link" data-scroll-target="#sec-local"><span class="header-section-number">4.2</span> Local processing</a>
  <ul class="collapse">
  <li><a href="#determine-fasttrack-settings" id="toc-determine-fasttrack-settings" class="nav-link" data-scroll-target="#determine-fasttrack-settings"><span class="header-section-number">4.2.1</span> Determine FastTrack settings</a>
  <ul class="collapse">
  <li><a href="#sec-vowel-by-vowel" id="toc-sec-vowel-by-vowel" class="nav-link" data-scroll-target="#sec-vowel-by-vowel"><span class="header-section-number">4.2.1.1</span> Vowel-by-vowel</a></li>
  </ul></li>
  <li><a href="#sec-apply" id="toc-sec-apply" class="nav-link" data-scroll-target="#sec-apply"><span class="header-section-number">4.2.2</span> Apply FastTrack to all tokens</a></li>
  <li><a href="#sec-validation" id="toc-sec-validation" class="nav-link" data-scroll-target="#sec-validation"><span class="header-section-number">4.2.3</span> Validate settings</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#sec-filter" id="toc-sec-filter" class="nav-link" data-scroll-target="#sec-filter"><span class="header-section-number">5</span> Filtering and New Variables</a>
  <ul>
  <li><a href="#demographic-factors" id="toc-demographic-factors" class="nav-link" data-scroll-target="#demographic-factors"><span class="header-section-number">5.1</span> Demographic Factors</a></li>
  <li><a href="#linguistic-factors-stress-stopwords-duration-and-following-environment" id="toc-linguistic-factors-stress-stopwords-duration-and-following-environment" class="nav-link" data-scroll-target="#linguistic-factors-stress-stopwords-duration-and-following-environment"><span class="header-section-number">5.2</span> Linguistic Factors: Stress, Stopwords, Duration and Following Environment</a></li>
  <li><a href="#formant-tracking-errors" id="toc-formant-tracking-errors" class="nav-link" data-scroll-target="#formant-tracking-errors"><span class="header-section-number">5.3</span> Formant Tracking Errors</a></li>
  <li><a href="#check-previously-identified-tokens" id="toc-check-previously-identified-tokens" class="nav-link" data-scroll-target="#check-previously-identified-tokens"><span class="header-section-number">5.4</span> Check Previously Identified Tokens</a></li>
  </ul></li>
  <li><a href="#sec-data-desc" id="toc-sec-data-desc" class="nav-link" data-scroll-target="#sec-data-desc"><span class="header-section-number">6</span> Interim Data Description</a>
  <ul>
  <li><a href="#vowel-space" id="toc-vowel-space" class="nav-link" data-scroll-target="#vowel-space"><span class="header-section-number">6.1</span> Vowel Space</a></li>
  <li><a href="#participant-level-summary" id="toc-participant-level-summary" class="nav-link" data-scroll-target="#participant-level-summary"><span class="header-section-number">6.2</span> Participant Level Summary</a></li>
  <li><a href="#centre-level-summary" id="toc-centre-level-summary" class="nav-link" data-scroll-target="#centre-level-summary"><span class="header-section-number">6.3</span> Centre Level Summary</a></li>
  <li><a href="#tables" id="toc-tables" class="nav-link" data-scroll-target="#tables"><span class="header-section-number">6.4</span> Tables</a>
  <ul class="collapse">
  <li><a href="#data-density" id="toc-data-density" class="nav-link" data-scroll-target="#data-density"><span class="header-section-number">6.4.1</span> Data density</a></li>
  </ul></li>
  <li><a href="#filtering-flow-chart" id="toc-filtering-flow-chart" class="nav-link" data-scroll-target="#filtering-flow-chart"><span class="header-section-number">6.5</span> Filtering Flow Chart</a></li>
  </ul></li>
  <li><a href="#normalisation" id="toc-normalisation" class="nav-link" data-scroll-target="#normalisation"><span class="header-section-number">7</span> Normalisation</a>
  <ul>
  <li><a href="#lobanov-2.0-top-5-vowels" id="toc-lobanov-2.0-top-5-vowels" class="nav-link" data-scroll-target="#lobanov-2.0-top-5-vowels"><span class="header-section-number">7.1</span> Lobanov 2.0 (top 5 vowels)</a></li>
  <li><a href="#single-parameter-log-mean-normalisation" id="toc-single-parameter-log-mean-normalisation" class="nav-link" data-scroll-target="#single-parameter-log-mean-normalisation"><span class="header-section-number">7.2</span> Single-parameter log-mean normalisation</a></li>
  <li><a href="#two-parameter-log-mean" id="toc-two-parameter-log-mean" class="nav-link" data-scroll-target="#two-parameter-log-mean"><span class="header-section-number">7.3</span> Two-parameter log-mean</a></li>
  <li><a href="#sec-lob2" id="toc-sec-lob2" class="nav-link" data-scroll-target="#sec-lob2"><span class="header-section-number">7.4</span> Lobanov with Imputation</a></li>
  </ul></li>
  <li><a href="#merge-and-export-data" id="toc-merge-and-export-data" class="nav-link" data-scroll-target="#merge-and-export-data"><span class="header-section-number">8</span> Merge and Export Data</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<section id="overview" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Overview</h1>
<p>This document sets out the R code used to extract all monophthongs, track formants using the FastTrack plugin for Praat, filter, and normalise.</p>
<p>Formant tracking was carried out using FastTrack in Praat. Instructions to reproduce our formant extraction method are provided below and a validation of the FastTrack settings we used is provided in <a href="#sec-validation" class="quarto-xref">Section&nbsp;4.2.3</a>.</p>
<p>Note that we extract all monophthongs from the corpus in this document, while we only analyse the ‘extended short front vowel shift’ in the associated paper. The full complement of monophthongs is necessary for normalisation.</p>
<p>There are a few side-lines in these supplementary materials. For the purposes of the paper, the key features are:</p>
<ul>
<li><a href="#sec-apply" class="quarto-xref">Section&nbsp;4.2.2</a>: The code which actually carried out our formant tracking.</li>
<li><a href="#sec-filter" class="quarto-xref">Section&nbsp;5</a>: Data filtering steps.</li>
<li><a href="#sec-lob2" class="quarto-xref">Section&nbsp;7.4</a>: The normalisation method we use.</li>
</ul>
</section>
<section id="packages-and-renv-environment" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Packages and <code>renv</code> environment</h1>
<p>We load a series of R packages.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidyverse and related packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># improved tables</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># File path management</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># nzilbb.labbcat allows access to our LaBB-CAT instance.</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nzilbb.labbcat)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># nzilbb.vowels provides a series of functions to help with processing vowel</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># data.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nzilbb.vowels)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># To construct a diagram of the filtering process.</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DiagrammeR)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># To plot correlations</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggcorrplot)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># To load images from file</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(imager)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># We use fasttrackr as part of our workflow for using FastTrack with Praat.</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># (Rather than directly using fasttrackr to replace the Praat integration).</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fasttrackr)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># We use rPraat is used to load midpoint readings.</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rPraat)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>labbcat.url <span class="ot">&lt;-</span> <span class="st">'https://labbcat.canterbury.ac.nz/kids/'</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Set ggplot theme</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Set colours for vowel plots</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># These are derived from Tol's rainbow palette, designed</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="co"># to be maximally readable for various forms of colour </span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co"># blindness (https://personal.sron.nl/~pault/).</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>vowel_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">DRESS =</span> <span class="st">"#777777"</span>,</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">FLEECE =</span> <span class="st">"#882E72"</span>,</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">GOOSE =</span> <span class="st">"#4EB265"</span>,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">KIT =</span> <span class="st">"#7BAFDE"</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">LOT =</span> <span class="st">"#DC050C"</span>,</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">TRAP =</span> <span class="st">"#F7F056"</span>,</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">START =</span> <span class="st">"#1965B0"</span>,</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">STRUT =</span> <span class="st">"#F4A736"</span>,</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">THOUGHT =</span> <span class="st">"#72190E"</span>,</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">NURSE =</span> <span class="st">"#E8601C"</span>,</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">FOOT =</span> <span class="st">"#5289C7"</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="co"># It is sometimes useful for filtering to have a list of all monophthongs.</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>monophthongs <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DRESS"</span>, <span class="st">"FLEECE"</span>, <span class="st">"GOOSE"</span>, <span class="st">"KIT"</span>, <span class="st">"LOT"</span>, <span class="st">"TRAP"</span>, <span class="st">"START"</span>, <span class="st">"STRUT"</span>,</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  <span class="st">"THOUGHT"</span>, <span class="st">"NURSE"</span>, <span class="st">"FOOT"</span>, <span class="st">"SCHWA"</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a seed for the random sampling below</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We use <code>renv</code> to store and restore the specific versions of packages we use. For more information see <a href="https://rstudio.github.io/renv/articles/renv.html" class="uri">https://rstudio.github.io/renv/articles/renv.html</a>. Install <code>renv</code> if you do not have the package. We use R version 4.4.2.</p>
</section>
<section id="labb-cat-extraction" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> LaBB-CAT extraction</h1>
<p>Transcripts and audio of story retell tasks were uploaded to a LaBB-CAT instance <span class="citation" data-cites="fromont-hay-2012-labb">(<a href="#ref-fromont-hay-2012-labb" role="doc-biblioref">Fromont 2012</a>)</span>. We extract all monophthong tokens from our LaBB-CAT instance using the <code>nzilbb.labbcat</code> package. The code in the block below will only run successfully if you have access to the LaBB-CAT instance (which you likely do not!). It is provided for documentation purposes.</p>
<p>It is worth noting here that there is a two-stage process where the <code>segment</code> layer is generated by MFA using an American English phonemic dictionary. From this we generate a <code>celexSegment</code> layer which contains the most likely pronunciation from the CELEX dictionary.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search pattern</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">columns =</span> <span class="fu">list</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">layers =</span> <span class="fu">list</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># We want all vowels in the segment layer. The pattern is a</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># regular expression, using the DISC alphabet.</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># We will later filter to include only the monophthongs from the </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># celexSegment layer.</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">segment =</span> <span class="fu">list</span>(<span class="at">pattern =</span> <span class="st">"[I@EVQU{i#3</span><span class="sc">\\</span><span class="st">$u123456789]"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect matching tokens.</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># anchor.confidence.min gives us all automatically aligned tokens.</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># We only take tokens from transcripts which have been manually corrected.</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">getMatches</span>(</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> pattern,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">page.length =</span> <span class="dv">1000</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">anchor.confidence.min =</span> <span class="dv">50</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only extract transcripts which have been manually corrected.</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">transcript.expression =</span> <span class="fu">expressionFromAttributeValue</span>(</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'transcript_phonemic_corrections'</span>, <span class="dv">1</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokens: 19446</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect relevant information at the transcript level. This includes the </span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co"># age of the child when the transcript was recorded, where it was recorded, </span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co"># etc.</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>transcript_attributes <span class="ot">&lt;-</span> <span class="fu">getTranscriptAttributes</span>(</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>(matches<span class="sc">$</span>Transcript),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">'transcript_cp'</span>, <span class="st">'transcript_age'</span>, <span class="st">'transcript_centre'</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">'transcript_recording_date'</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge transcript-level information with matches by left join.</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">transcript =</span> Transcript,</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant =</span> Participant</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(transcript_attributes)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect relevant information at participant level.</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>participant_attributes <span class="ot">&lt;-</span> <span class="fu">getParticipantAttributes</span>(</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>(matches<span class="sc">$</span>participant),</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="st">'participant_date_of_birth'</span>, <span class="st">'participant_gender'</span>, </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="st">'participant_ethnicity'</span>, <span class="st">'participant_home_language'</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge participant-level information with matches by left join.</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span> </span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(participant_attributes)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect match labels (additional information at the token level)</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>match_labels <span class="ot">&lt;-</span> <span class="fu">getMatchLabels</span>(</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">match.ids =</span> matches<span class="sc">$</span>MatchId,</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">layer.ids =</span> <span class="fu">c</span>(</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">"celexSegment"</span>, <span class="st">"noise"</span>,</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">"syllable"</span>, <span class="st">"orthography"</span>,</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">"celex_frequency"</span>, <span class="st">'corpus_frequency'</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect the segment following each token.</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>following_seg <span class="ot">&lt;-</span> <span class="fu">getMatchLabels</span>(</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  labbcat.url, </span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  matches<span class="sc">$</span>MatchId, </span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">layer.ids =</span> <span class="fu">c</span>(<span class="st">"segment"</span>),</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">target.offset=</span><span class="dv">1</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(matches, match_labels, following_seg)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Praat integration to collect pitch information</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>pitches <span class="ot">&lt;-</span> <span class="fu">processWithPraat</span>(</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  matches<span class="sc">$</span>MatchId, matches<span class="sc">$</span>Target.segment.start, matches<span class="sc">$</span>Target.segment.end,</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">window.offset =</span> <span class="fl">0.025</span>,</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">praatScriptPitch</span>(</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">get.mean =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">get.minimum =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">get.maximum =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">time.step =</span> <span class="dv">0</span>,</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">pitch.floor =</span> <span class="dv">150</span>,</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">max.number.of.candidates =</span> <span class="dv">15</span>,</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">very.accurate =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">silence.threshold =</span> <span class="fl">0.03</span>,</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">voicing.threshold =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">octave.cost =</span> <span class="fl">0.01</span>,</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">octave.jump.cost =</span> <span class="fl">0.35</span>,</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">voiced.unvoiced.cost =</span> <span class="fl">0.35</span>,</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">pitch.ceiling =</span> <span class="dv">1250</span>, <span class="co"># On the high side, some children can reach almost 2000 Hz when yelling</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># https://www.fon.hum.uva.nl/praat/manual/Intro_4_2__Configuring_the_pitch_contour.html</span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">pitch.floor.male =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">voicing.threshold.male =</span> <span class="fl">0.4</span>,</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">pitch.ceiling.male =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender.attribute =</span> <span class="st">"participant_gender"</span>,</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">value.for.male =</span> <span class="st">"M"</span>,</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample.points =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">interpolation =</span> <span class="st">"linear"</span>,</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">skip.errors =</span> <span class="cn">TRUE</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(matches, pitches) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Error)</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy names, generate useful columns, remove unnecessary columns.</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span> </span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> Target.segment.start,</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">end =</span> Target.segment.end,</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_start =</span> Target.word.start,</span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_end =</span> Target.word.end,</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> transcript_age,</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">dob =</span> participant_date_of_birth,</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> participant_gender,</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">collect =</span> transcript_cp,</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">ethnicity =</span> participant_ethnicity,</span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">home_language =</span> participant_home_language,</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> Text,</span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">word =</span> orthography,</span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>    <span class="at">following_segment =</span> Token.plus.<span class="fl">1.</span>segment</span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the mfa_vowel variable uses the segment layer and represents the best</span></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>    <span class="co"># guess of the mfa model given it's available pronunciations.</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">mfa_vowel =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(Target.segment),</span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>      <span class="at">FLEECE =</span> <span class="st">"i"</span>,</span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">KIT =</span> <span class="st">"I"</span>,</span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>      <span class="at">DRESS =</span> <span class="st">"E"</span>,</span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">TRAP =</span> <span class="st">"{"</span>,</span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">START =</span> <span class="st">"#"</span>,</span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>      <span class="at">LOT =</span> <span class="st">"Q"</span>,</span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>      <span class="at">THOUGHT =</span> <span class="st">"$"</span>,</span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>      <span class="at">NURSE =</span> <span class="st">"3"</span>,</span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>      <span class="at">STRUT =</span> <span class="st">"V"</span>,</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>      <span class="at">FOOT =</span> <span class="st">"U"</span>,</span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>      <span class="at">GOOSE =</span> <span class="st">"u"</span>,</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>      <span class="at">SCHWA =</span> <span class="st">"@"</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove consonants added when converting from mfa segments to celex</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>    <span class="co"># phobemes. This code uses the fact that '[^X]' matches all characters</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>    <span class="co"># _except_ x.</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">str_replace</span>(</span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>      celexSegment,</span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>      <span class="st">"[^iIE{#</span><span class="sc">\\</span><span class="st">$3QVUu@123456789]"</span>,</span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>      <span class="st">""</span></span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The vowel variable will have some DISC coded diphthongs in it. e.g.</span></span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>    <span class="co"># '8' (= SQUARE)</span></span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(vowel),</span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">FLEECE =</span> <span class="st">"i"</span>,</span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">KIT =</span> <span class="st">"I"</span>,</span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">DRESS =</span> <span class="st">"E"</span>,</span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>      <span class="at">TRAP =</span> <span class="st">"{"</span>,</span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a>      <span class="at">START =</span> <span class="st">"#"</span>,</span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a>      <span class="at">LOT =</span> <span class="st">"Q"</span>,</span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>      <span class="at">THOUGHT =</span> <span class="st">"$"</span>,</span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>      <span class="at">NURSE =</span> <span class="st">"3"</span>,</span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>      <span class="at">STRUT =</span> <span class="st">"V"</span>,</span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a>      <span class="at">FOOT =</span> <span class="st">"U"</span>,</span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>      <span class="at">GOOSE =</span> <span class="st">"u"</span>,</span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>      <span class="at">SCHWA =</span> <span class="st">"@"</span></span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">stress =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(syllable, <span class="st">'".*'</span>) <span class="sc">~</span> <span class="st">'"'</span>,</span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(syllable, <span class="st">"'.*"</span>) <span class="sc">~</span> <span class="st">"'"</span>,</span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"0"</span></span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>Target.segment, <span class="sc">-</span>Corpus, <span class="sc">-</span>Line, <span class="sc">-</span>LineEnd,</span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>Before.Match, <span class="sc">-</span>After.Match, <span class="sc">-</span>Number, <span class="sc">-</span>Target.word, <span class="sc">-</span>SearchName</span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter non-monophthongs (in celex_vowel layer)</span></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span> </span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">%in%</span> monophthongs</span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">factor</span>(vowel, <span class="at">levels =</span> monophthongs)</span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a><span class="co"># tokens: 16045</span></span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct ethnicity error in participant.</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span> </span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>    <span class="at">ethnicity =</span> <span class="fu">if_else</span>(ethnicity <span class="sc">==</span> <span class="st">"MÄori"</span>, <span class="st">"Māori"</span>, ethnicity)</span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a><span class="co"># Save data</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(matches, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'untracked_vowels.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>We now load the data extracted from LaBB-CAT in the above block.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'untracked_vowels.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are 16045 tokens. The column names are:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(vowels)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "transcript"                "participant"              
 [3] "MatchId"                   "URL"                      
 [5] "text"                      "word_start"               
 [7] "word_end"                  "start"                    
 [9] "end"                       "collect"                  
[11] "age"                       "transcript_centre"        
[13] "transcript_recording_date" "dob"                      
[15] "gender"                    "ethnicity"                
[17] "home_language"             "celexSegment"             
[19] "noise"                     "syllable"                 
[21] "word"                      "celex_frequency"          
[23] "corpus_frequency"          "following_segment"        
[25] "meanPitch"                 "minPitch"                 
[27] "maxPitch"                  "mfa_vowel"                
[29] "vowel"                     "stress"                   </code></pre>
</div>
</div>
<p>The important columns to note are:</p>
<ul>
<li><code>participant</code> contains a unique participant identified.</li>
<li><code>MatchId</code> and <code>URL</code> connect the each segment with the LaBB-CAT corpus.</li>
<li><code>mfa_vowel</code> indicates the vowel detected by MFA which the segment comes from stored as a Wells lexical set.</li>
<li><code>vowel</code> indicates the best CELEX phoneme to match the segments found by MFA.</li>
<li><code>start</code> and <code>end</code> give the onset and offset of the segment (seconds).</li>
<li><code>minPitch</code>, <code>maxPitch</code> and <code>meanPitch</code> give pitch information for the segment extracted via Praat.</li>
<li><code>following_segment</code> gives the CELEX DISC code for the following segment.</li>
<li><code>syllable</code> and <code>stress</code> tell us what syllable the segment comes from and whether it is stressed.</li>
<li><code>text</code> and <code>word</code> give the word in which the segment appears with punctuation and without, respectively.</li>
<li><code>corpus_frequency</code> and <code>celex_frequency</code> give frequency from the corpus and from CELEX, respectively.</li>
<li><code>word_start</code> and <code>word_end</code> give the onset and offset of the word which contains the segment (seconds).</li>
<li><code>dob</code>, <code>gender</code>, <code>ethnicity</code>, and <code>home_language</code> provide metadata about the child.</li>
<li><code>collect</code> indicates the collection point at which the segment was recorded (1, 2, 3, or 4).</li>
<li><code>transcript_centre</code> and <code>transcript_recording_date</code> tells us where and when the transcript was recorded.</li>
</ul>
<p>We will give more detailed summary information after the filtering and preprocessing steps (<a href="#sec-data-desc" class="quarto-xref">Section&nbsp;6</a>).</p>
</section>
<section id="formant-tracking-with-fasttrack" class="level1 page-columns page-full" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Formant tracking with FastTrack</h1>
<p>FastTrack <span class="citation" data-cites="barreda2021fast">(<a href="#ref-barreda2021fast" role="doc-biblioref">Barreda 2021</a>)</span> provides a more robust alternative to the default automatic formant tracking method in Praat <span class="citation" data-cites="boersma2024praat">(<a href="#ref-boersma2024praat" role="doc-biblioref">Boersma and Weenink 2024</a>)</span>. FastTrack is a Praat plugin which fits a series of alternative formant tracks, fits polynomial models through each alternative track, and decides on a winner on the basis of a series of heuristics applied to both the formant tracks and models.</p>
<p>FastTrack has a series of user-adjustable options. Barreda <span class="citation" data-cites="barreda2021fast">(<a href="#ref-barreda2021fast" role="doc-biblioref">2021</a>)</span> recommends that users adjust these options to match their speakers.</p>
<p>Our first approach to formant tracking applied FastTrack using LaBB-CAT’s integration with FastTrack. However, our need to track the formants of very young child speech required us to adjust settings which are unavailable through LaBB-CAT. In particular, we applied hard boundaries for the possible frequency values of formants from some vowel types. Additionally, we needed to examine alternative analyses produced by FastTrack to determine how and why our initial attempts were failing. Consequently, we decided to process the formants by downloading all audio files from LaBB-CAT and applying FastTrack locally.</p>
<p>The path we took may well be useful to other researchers, so we present it in some detail here. We first present our original formant tracking and show what went wrong (<a href="#sec-labbcat-int" class="quarto-xref">Section&nbsp;4.1</a>). We then set out the method for extracting the required audio, locally processing it, and determining appropriate FastTrack settings (<a href="#sec-local" class="quarto-xref">Section&nbsp;4.2</a>). Finally, we validate the settings we decided on by spot checking 30 tokens from each vowel (<a href="#sec-validation" class="quarto-xref">Section&nbsp;4.2.3</a>).</p>
<section id="sec-labbcat-int" class="level2 page-columns page-full" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sec-labbcat-int"><span class="header-section-number">4.1</span> LaBB-CAT integration</h2>
<p>LaBB-CAT integrates with FastTrack and allows control of many of the options for formant extraction. Our initial formant extraction used FastTrack recommendations for speakers less than five foot tall (152cm). This cut off height is significantly taller than the expected height of a five year old in New Zealand. In New Zealand, the median height for five year old boys is 110cm and for five year old girls is 109cm (<a href="https://www.tewhatuora.govt.nz/for-the-health-sector/specific-life-stage-health-information/child-health/well-child-tamariki-programme/growth-charts">Te Whatu Ora</a>).</p>
<p>The code below again requires access to our LaBB-CAT instance, and is provided for documentation purposes only. Behind the scenes, this document loads the result of running this code so that subsequent blocks will run.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> <span class="fu">processWithPraat</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  labbcat.url,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  vowels<span class="sc">$</span>MatchId, vowels<span class="sc">$</span>start, vowels<span class="sc">$</span>end,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">praatScriptFastTrack</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">formants =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample.points =</span> <span class="fu">c</span>(<span class="fl">0.5</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest.analysis.frequency =</span> <span class="dv">5500</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use of NULL here turns off differentiation for male and female speakers.</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest.analysis.frequency.male =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest.analysis.frequency =</span> <span class="dv">7500</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest.analysis.frequency.male =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender.attribute =</span> <span class="st">"participant_gender"</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">value.for.male =</span> <span class="st">"M"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">time.step =</span> <span class="fl">0.002</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">tracking.method =</span> <span class="st">"burg"</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">number.of.formants =</span> <span class="dv">3</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">maximum.f1.frequency =</span> <span class="dv">1200</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">maximum.f1.bandwidth =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">maximum.f2.bandwidth =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">maximum.f3.bandwidth =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">minimum.f4.frequency =</span> <span class="dv">2900</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">enable.rhotic.heuristic =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">enable.f3.f4.proximity.heuristic =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">number.of.steps =</span> <span class="dv">24</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">number.of.coefficients =</span> <span class="dv">5</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Take audio 0.025s either side of token start and end.</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">window.offset =</span> <span class="fl">0.025</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(vowels, formants)</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">time =</span> time_0_5,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">F1 =</span> f1_time_0_5,</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">F2 =</span> f2_time_0_5</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(vowels, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'vowels_default_ft.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>We’ll now visualise the default formant readings in the vowel space.</p>
<p>First, we define a plotting function.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plot_vs <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data, vowel_colours, <span class="at">alpha_level =</span> <span class="fl">0.2</span>) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  means <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      vowel</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">F1 =</span> <span class="fu">mean</span>(F1, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">F2 =</span> <span class="fu">mean</span>(F2, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">winner =</span> <span class="st">"MEAN"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  out_plot <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> F2, </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> F1, </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> vowel</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> alpha_level, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_ellipse</span>(<span class="at">level=</span><span class="fl">0.67</span>, <span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> means, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_reverse</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4500</span>, <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_reverse</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2000</span>, <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>vowel_colours)</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  out_plot</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We then apply the function:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ft_default_plot <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs</span>(<span class="at">vowel_colours=</span>vowel_colours) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"F1 and F2 for All Monophthongs"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"FastTrack Defaults, 1 s.d. ellipses."</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"Vowel"</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>ft_default_plot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-all-default" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-all-default-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-all-default-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: All monophthong tokens, with default FastTrack settings for speakers below 5ft."><img src="SM1_formants_files/figure-html/fig-all-default-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-all-default-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: All monophthong tokens, with default FastTrack settings for speakers below 5ft.
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-all-default" class="quarto-xref">Figure&nbsp;1</a> shows a large number of high-F1 outliers. This is clear at the bottom of the vowel space plot. However, the biggest problem is the <em>width</em> of the ellipses for our high front vowels.</p>
<p>This is clearer if we look at a subset of the vowels. In this case, <span class="smallcaps">fleece</span>, <span class="smallcaps">dress</span> and <span class="smallcaps">trap</span>.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'FLEECE'</span>, <span class="st">'DRESS'</span>, <span class="st">'TRAP'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha_level =</span> <span class="fl">0.3</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"F1 and F2 for FLEECE, DRESS, and TRAP Monophthongs"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"FastTrack Defaults, 1 s.d. ellipses"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"Vowel"</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-high-default" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-high-default-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-high-default-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: All FLEECE, DRESS, and TRAP tokens, with default FastTrack settings for speakers below 5ft."><img src="SM1_formants_files/figure-html/fig-high-default-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-high-default-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: All FLEECE, DRESS, and TRAP tokens, with default FastTrack settings for speakers below 5ft.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There is an extreme spread of F2 values for these vowels. The ellipses suggest a majority of the tokens are in sensible places, but there are a <em>very</em> large number of implausible values in the data frame. In particular, none of these tokens should be at the very back of the vowel space.</p>
<p>To determine the origin of these bad values, we looked at a sample of tokens and determine if alternative FastTrack settings would be appropriate. As noted above, this required us to process the data locally.</p>
</section>
<section id="sec-local" class="level2 page-columns page-full" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sec-local"><span class="header-section-number">4.2</span> Local processing</h2>
<section id="determine-fasttrack-settings" class="level3 page-columns page-full" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="determine-fasttrack-settings"><span class="header-section-number">4.2.1</span> Determine FastTrack settings</h3>
<p>There are two broad categories of setting which we can modify:</p>
<ol type="1">
<li>The range of upper frequency limits within which FastTrack generates and compares analyses.</li>
<li>Hard limits on the mean value of each formant track.</li>
</ol>
<p>We will look at a sample of analyses of vowel tokens to determine how we should modify our settings in each category. We’ll start the process by making some changes to upper frequency limits on the basis of the plots we have already seen (<a href="#fig-all-default" class="quarto-xref">Figure&nbsp;1</a>).</p>
<p>The most obvious explanation for the poor results of our formant tracking above is that we have set the maximum frequency too low to capture small children’s speech. To see a particularly clear example of what can happen when the maximum frequency is set too low, look at the following ‘before’ and ‘after’ plots (<a href="#fig-example" class="quarto-xref">Figure&nbsp;3</a>).</p>
<div id="fig-example" class="quarto-layout-panel page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-example" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-before" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-before-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/before_AV6E_ZCBCOI5R_T1_80.png" class="lightbox" data-gallery="fig-example" title="Figure&nbsp;3&nbsp;(a): Before (Max frequency = 6457Hz)"><img src="../images/before_AV6E_ZCBCOI5R_T1_80.png" class="img-fluid figure-img" data-ref-parent="fig-example"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-subfloat-caption quarto-subfloat-fig" id="fig-before-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Before (Max frequency = 6457Hz)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-example" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-after" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-after-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/after_AV6E_ZCBCOI5R_T1_80.png" class="lightbox" data-gallery="fig-example" title="Figure&nbsp;3&nbsp;(b): After (Max frequency = 8870Hz"><img src="../images/after_AV6E_ZCBCOI5R_T1_80.png" class="img-fluid figure-img" data-ref-parent="fig-example"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-subfloat-caption quarto-subfloat-fig" id="fig-after-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) After (Max frequency = 8870Hz
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: A vowel token before and after changes to FastTrack settings. The green line indicates F2 and the formant cut off for the analysis is at the top of each plot.
</figcaption>
</figure>
</div>
<p>In this kind of case, the only place for the second formant to go using the default settings is in the empty(ish) space between, roughly, 1000Hz and 3500Hz.</p>
<p><a href="#fig-all-default" class="quarto-xref">Figure&nbsp;1</a> suggests that the front vowel have a bigger problem here than the others (their expected F2 values are higher, so they should be more likely to run in to this problem).</p>
<p>So we set the following range of upper frequency cut off values for the ‘front’, ‘back’ or ‘other’ vowels:</p>
<ul>
<li>‘Front vowels’ (<span class="smallcaps">fleece, dress, nurse, goose, trap, kit</span>): 6000-9000Hz.</li>
<li>‘Back vowels’ (<span class="smallcaps">lot, thought, foot</span>): 5000-8000Hz.</li>
<li>‘Other vowels’ (<span class="smallcaps">strut, start, schwa</span>): 5500-8500Hz</li>
</ul>
<p>For comparison, recall that the original settings were 5500 to 7500Hz for all vowels.</p>
<p>We apply these settings to a random sample of vowel tokens and then determine whether or not there is any evidence that the range needs to be changed and whether the addition of hard limits on formant ranges would enable FastTrack to select a better analysis.</p>
<p>The code block below (folded by default) generates the samples (n=25 for each vowel) and extracts the relevant audio from LaBB-CAT. Again, it requires access to the LaBB-CAT instance.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>vowel_types <span class="ot">&lt;-</span> vowels<span class="sc">$</span>vowel <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This dataframe will contain the samples from each vowel</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vowel =</span> vowel_types</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to apply to each vowel type to generate a sample of 25.</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>create_sample <span class="ot">&lt;-</span> <span class="cf">function</span>(vowel_type) {</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create directory to hold the sample.</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">'praat'</span>, vowel_type), <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create sample.</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  sample_vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>      vowel <span class="sc">==</span> vowel_type</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">25</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get sound files from LaBB-CAT</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  sample_files <span class="ot">&lt;-</span> <span class="fu">getSoundFragments</span>(</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    labbcat.url,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">ids =</span> sample_vowels<span class="sc">$</span>transcript,</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">start.offsets =</span> sample_vowels<span class="sc">$</span>start <span class="sc">-</span> <span class="fl">0.025</span>,</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">end.offsets =</span> sample_vowels<span class="sc">$</span>end <span class="sc">-</span> <span class="fl">0.025</span>,</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">path =</span> <span class="fu">here</span>(<span class="st">"praat"</span>, vowel_type, <span class="st">"sounds"</span>)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get filename.</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  sample_vowels <span class="ot">&lt;-</span> sample_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">file =</span> <span class="fu">str_extract</span>(sample_files, <span class="st">"[A-Za-z0-9_</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">-]*$"</span>)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Processing with FastTrack requires file information. This is</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># created here using the `fasttrackr` package's `makefileinformation`</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># function.</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>  sample_info <span class="ot">&lt;-</span> <span class="fu">makefileinformation</span>(<span class="fu">here</span>(<span class="st">'praat'</span>, vowel_type))</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>  sample_info <span class="ot">&lt;-</span> sample_info <span class="sc">%&gt;%</span> </span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>      sample_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(file, vowel)</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span>label</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> vowel</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(number, file, label)</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Write the file information to the relevant folder.</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(sample_info, <span class="fu">here</span>(<span class="st">'praat'</span>, vowel_type, <span class="st">'file_information.csv'</span>))</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the sample.</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>  sample_vowels</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply function to all vowel types.</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> samples <span class="sc">%&gt;%</span> </span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample =</span> <span class="fu">map</span>(vowel, create_sample)</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a><span class="co"># We save information about the samples.</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(samples, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'samples.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>In order to process these audio files, we used FastTrack with Praat version 6.1.09. FastTrack does not have version numbers, but was downloaded on the 9th of March, 2023. The version of FastTrack available on that date can be found <a href="https://github.com/santiagobarreda/FastTrack/tree/3d0482f4675aed85bc15635a4af423440b3092fc">here</a>. We used the ‘Track folder…’ option visible when Praat is opened.</p>
<p>We used 5 coefficient for prediction, 24 candidate analyses within the limits set, a time step of 0.002 seconds, the Burg tracking method, the <code>dct</code> basis function and <code>mae</code> errors. We enabled the F1 &lt; 1200Hz, F4 &gt; 2900Hz, and F3 and F4 proximity heuristics and turned off the rhotic heuristic.</p>
<p>If you are repeating these steps, make sure to tick the ‘Make images comparing analyses’ box. If you do not, you will be unable to determine whether hard frequency limits might improve your results.</p>
<section id="sec-vowel-by-vowel" class="level4 page-columns page-full" data-number="4.2.1.1">
<h4 data-number="4.2.1.1" class="anchored" data-anchor-id="sec-vowel-by-vowel"><span class="header-section-number">4.2.1.1</span> Vowel-by-vowel</h4>
<p>Working through these samples was a long process. The process, for each vowel, is summarised in the tabs which appear a after a few paragraphs below.</p>
<p>The code folded below loads the formants selected by FastTrack.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the winning values from FastTrack. We read in the `aggregated_data.csv`</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># file produced by FastTrack for each vowel type and analysis and the</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `winners.csv` file to tell us which of the analyses tried by FastTrack was</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># considered best.</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>fasttrack_info <span class="ot">&lt;-</span> samples <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ft_data =</span> <span class="fu">map</span>(vowel, <span class="sc">~</span> <span class="fu">read_csv</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">here</span>(<span class="st">'praat'</span>, .x, <span class="st">'processed_data'</span>, <span class="st">'aggregated_data.csv'</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">winners =</span> <span class="fu">map</span>(vowel, <span class="sc">~</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">'praat'</span>, .x, <span class="st">'winners.csv'</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(winner))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vowel, ft_data, winners) <span class="sc">%&gt;%</span> </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="fu">c</span>(ft_data, winners))</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Fasttrack will ignore files which it cannot fit models to. Usually this is </span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># because the token is too short. We want to know about these, for the purposes</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># of the test below. The following code adds these tokens to the data from </span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co"># the samples.</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="ot">&lt;-</span> samples <span class="sc">%&gt;%</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sample) <span class="sc">%&gt;%</span> </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(sample) <span class="sc">%&gt;%</span> </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove '.wav' from filename. Enables left join below.</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="fu">str_sub</span>(file, <span class="at">end =</span> <span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vowel, file, word, start, end, MatchId, URL, noise, meanPitch) <span class="sc">%&gt;%</span> </span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">token_dur =</span> end <span class="sc">-</span> start</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(fasttrack_info, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"vowel"</span>, <span class="st">"file"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if there is no 'winner' value, the token hasn't been tracked by </span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fasttrack.</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">tracked =</span> <span class="sc">!</span><span class="fu">is.na</span>(winner)</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>In order to plot the results of our local processing, we slightly modify the previous vowel space plotting function. It now includes integers which identify the FastTrack analysis which was selected for the token, with 1 indicating the lowest upper bound tried and 24 indicating the highest.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>plot_vs_ft <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  means <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      vowel</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">f1 =</span> <span class="fu">mean</span>(f1, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">f2 =</span> <span class="fu">mean</span>(f2, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">winner =</span> <span class="st">"MEAN"</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  out_plot <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> f2, </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> f1, </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> vowel, </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> winner</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_ellipse</span>() <span class="sc">+</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> means, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_reverse</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4500</span>, <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_reverse</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2000</span>, <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>vowel_colours) <span class="sc">+</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"F2"</span>, <span class="at">y =</span> <span class="st">"F1"</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  out_plot</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We then generate an overall plot:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="ot">&lt;-</span> fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">f1 =</span> f13,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">f2 =</span> f23</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-plot-demo" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-plot-demo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-plot-demo-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figure&nbsp;4: Sampled data for all vowel types. Integers indicate which FastTrack analysis was selected (1-24)."><img src="SM1_formants_files/figure-html/fig-plot-demo-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-plot-demo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Sampled data for all vowel types. Integers indicate which FastTrack analysis was selected (1-24).
</figcaption>
</figure>
</div>
</div>
</div>
<p>We still have some very wide ellipses. This is not surprising given lower token count (25 for each vowel). We’ll look at these in more detail, vowel-by-vowel, below.</p>
<p>Which analysis tends to win for each vowel type? That is, which of the 24 steps between the minimum frequency and the maximum analysis frequency is the winning analysis? We display this in a histogram:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> winner,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> vowel</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">24</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-ft-hist" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ft-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-ft-hist-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Figure&nbsp;5: Histogram of winning FastTrack analyses across all vowel types."><img src="SM1_formants_files/figure-html/fig-ft-hist-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ft-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Histogram of winning FastTrack analyses across all vowel types.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The ‘winner’ values in this plot are the ‘step’ which won. The steps move from the lowest allowable maximum frequency to the highest. We see here that the 1st and 24th steps win more than the other analyses. In such cases, it may be that the true analysis would be found at a more extreme value.</p>
<p>This plot suggests, for instance, that there might be a problem with the <span class="smallcaps">thought</span> vowel. The relative majority of <span class="smallcaps">thought</span> tokens seem to have the first analysis as the winner. This suggests that perhaps the lower bound needs to be lower. We will examine this further below.</p>
<p>For each vowel, we will plot the winning analyses from the sample in F1/F2 space with a number indicating which of the analyses won. The panel below enables you to switch between vowels. At the bottom of each panel, a decision will be made about the appropriate FastTrack settings for the relevant vowel.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">DRESS</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">FLEECE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">TRAP</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">NURSE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">GOOSE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">KIT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false" href="">THOUGHT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false" href="">LOT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false" href="">FOOT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-10" role="tab" aria-controls="tabset-1-10" aria-selected="false" href="">START</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-11" role="tab" aria-controls="tabset-1-11" aria-selected="false" href="">STRUT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-12" role="tab" aria-controls="tabset-1-12" aria-selected="false" href="">SCHWA</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-1-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"DRESS"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-dress-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-dress-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-dress-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;6: DRESS tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-dress-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-dress-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: DRESS tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>We will look at the three tokens with very low F2 and F1, indicated with ‘2’, ‘1’ and ‘1’ in the top right. We’ll also look at the tokens with F1 above 1000Hz.</p>
<p>These analyses are available for view in the project repository. We will talk through a few examples here.</p>
<p><img src="../images/UXX8_Z6244PSW_T4_ON_20211119_OA5SKD2NZQ__96.857-96.977_comparison.png" class="img-fluid"> These are the analyses considered for the token with file name <code>UXX8_Z6244PSW_T4_ON_20211119_OA5SKD2NZQ__96.857-96.977.wav</code>. It is one of the two ’1’s at the top right of <a href="#fig-dress-sample" class="quarto-xref">Figure&nbsp;6</a>. The winning analysis, the first analysis, is surrounded by a thick black box. The yellow dots and line indicate F1 and the green indicates F2. We see that the first analysis is collapsing F1 and F2 together and the putative F3 (the blue line) is a more plausible F2. If we look at the alternative analyses, we see that there is a higher frequency analysis which produces a better F1 and F2 (reliably from around the 10th analysis, reading left-to-right and top-to-bottom). As noted above, we can encourage FastTrack towards these alternative analyses by setting a hard limit on F1 and F2 values.</p>
<p>We now look at the token which appears with ‘18’ at the bottom right of Figure (<a href="#fig-dress-sample" class="quarto-xref">Figure&nbsp;6</a>).</p>
<p><img src="../images/AV6E_NCFLYZ5I_T4_ON_20211117_0N64QRXC1T__91.734-91.905_comparison.png" class="img-fluid"> This is a token from the word ‘fell’, which comes before a liquid and is, perhaps unsurprisingly, not much like a traditional <span class="smallcaps">dress</span> vowel. The analysis picked by FastTrack looks OK.</p>
<p>The token in question, outside the context of the word, is the following: <audio controls=""> <source src="../audio/AV6E_NCFLYZ5I_T4_ON_20211117_0N64QRXC1T__91.734-91.905.wav" type="audio/wav"> </audio></p>
<p>This kind of case will be filtered out below when we remove all tokens preceding liquids.</p>
<p>Manual inspection of the other cases doesn’t reveal obvious problems.</p>
<p>There were eight tokens which could not be tracked by FastTrack. These were:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to generate summary tables.</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>untracked_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(vowel_name) {</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      vowel <span class="sc">==</span> vowel_name,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>tracked</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(token_dur, meanPitch, word, noise)  </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"DRESS"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 4
  token_dur meanPitch             word     noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;
1   0.0552  "300.3791840692593 "  helping  &lt;NA&gt; 
2   0.0533  "339.9560478068988 "  went     &lt;NA&gt; 
3   0.0700  "269.6217297234238 "  then     &lt;NA&gt; 
4   0.0600  "250.88248397525118 " press    &lt;NA&gt; 
5   0.0408  "277.5504311967466 "  went     &lt;NA&gt; 
6   0.0300  "--undefined-- "      remember &lt;NA&gt; 
7   0.00825 "--undefined-- "      head     &lt;NA&gt; 
8   0.0400  "607.9970877857937 "  then     &lt;NA&gt; </code></pre>
</div>
</div>
<p>These were all very short (see left column <code>token_dur</code> for duration in seconds), with no obvious pattern in word or pitch. They did not occur in particularly noisy portions.</p>
<p><strong>Decision:</strong> set a lower bound on <span class="smallcaps">dress</span> F2 at 1500 and upper bound of 4000.</p>
</div>
<div id="tabset-1-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"FLEECE"</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-fleece-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-fleece-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-fleece-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;7: FLEECE tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-fleece-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-fleece-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: FLEECE tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The majority of these values are not in strange places for a small child’s <span class="smallcaps">fleece</span> vowel.</p>
<p>The token outside the ellipse and marked ‘2’ is a classic case of an F2 being fit through empty space:</p>
<p><img src="../images/F5CI_1G75P3TV_T4_ON_20211116_R4GINAN4H8__62.533-62.676_winner_.png" class="img-fluid"> In this case, analyses with a higher cut off fix the problem.</p>
<p>A more problematic case is <code>KSGT_QACKW1N6_T1_ON_20210611_KNOT605KHV__48.485-48.706</code>. The winning analysis is:</p>
<p><a href="../images/KSGT_QACKW1N6_T1_ON_20210611_KNOT605KHV__48.485-48.706_winner_.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/KSGT_QACKW1N6_T1_ON_20210611_KNOT605KHV__48.485-48.706_winner_.png" class="img-fluid"></a></p>
<p>Here, the F2 line (green) is again, going through empty space. However, it is going through at a value plausible for an F2. It looks like there is not much information in the audio. We enact a bandwidth-based filtering approach below and will check whether this token is excluded by it.</p>
<p>The token outside the ellipse which is labelled ‘5’ is a token of ‘the’ which sounds, on listening, to be an instance of the <span class="smallcaps">strut</span> vowel which has been incorrectly categorised in the course of forced alignment. The appearance of this token well outside the ellipse does not indicate a failure of formant tracking.</p>
<p>Finally, the token <code>ILA_T1_SX1LTCO7_SR_30072020__36.435-36.652</code> is an interesting case where the putative F2 is at a plausible value for a <span class="smallcaps">fleece</span> F2, but is too low in the spectrogram. The correct analysis doesn’t appear until the cut off is around 8000Hz. We have no way to avoid this kind of problem. It seems to occur in a small minority of cases in this sample. We will also check this token when we institute a bandwidth-based filtering step below.</p>
<p>The untracked tokens were:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"FLEECE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  token_dur meanPitch            word  noise
      &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt;
1    0.0600 "305.1243503883205 " see   &lt;NA&gt; 
2    0.0600 "320.6197420970537 " the   &lt;NA&gt; 
3    0.0600 "386.0671365348258 " kiwi  &lt;NA&gt; </code></pre>
</div>
</div>
<p>Each of these had a very short duration.</p>
<p><strong>Decision:</strong> set a lower bound on <span class="smallcaps">dress</span> F2 at 1500 and upper bound of 4000.</p>
</div>
<div id="tabset-1-3" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"TRAP"</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-trap-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-trap-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-trap-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Figure&nbsp;8: TRAP tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-trap-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-trap-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: TRAP tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The token with very high F1, marked ‘17’, outside the ellipse, has an acceptable spectrogram. The token outside the ellipse marked ‘5’ is an instance of a token with a bad start time.</p>
<p><img src="../images/999I_HFRCOYXN_T1_ON_20210614_9TZRESGTFU__55.015-55.275_winner_.png" class="img-fluid"> Without manually rechecking all segments, there is no way to avoid this kind of error coming up in some cases.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"TRAP"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  token_dur meanPitch             word  noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;
1    0.0400 "276.56177788650103 " that  &lt;NA&gt; </code></pre>
</div>
</div>
<p>One very short token was not tracked.</p>
<p><strong>Decision:</strong> set a lower bound on F2 of 1200 and an upper bound of 3500.</p>
</div>
<div id="tabset-1-4" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"NURSE"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-nurse-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-nurse-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-nurse-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Figure&nbsp;9: NURSE tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-nurse-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-nurse-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: NURSE tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This is a reasonably tight ellipse. Most of the winners look OK.</p>
<p>The token with an F1 above 1000 has some serious problems. But none of the alternative analyses are any better. It may be that a lower cut off would produce a better analysis. If so, we could categorise <span class="smallcaps">nurse</span> as an ‘other’ vowel. We won’t do this, but note it as a possible alternative path.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"NURSE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 4
# ℹ 4 variables: token_dur &lt;dbl&gt;, meanPitch &lt;chr&gt;, word &lt;chr&gt;, noise &lt;chr&gt;</code></pre>
</div>
</div>
<p>All tokens of <span class="smallcaps">nurse</span> could be tracked.</p>
<p><strong>Decision:</strong> set 1200 as a lower bound for F2 and an upper bound of 3500.</p>
</div>
<div id="tabset-1-5" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"GOOSE"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-goose-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-goose-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-goose-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Figure&nbsp;10: GOOSE tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-goose-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-goose-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: GOOSE tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Our <span class="smallcaps">goose</span> tokens have a very wide spread.</p>
<p>The token with a very high F1 is <code>KEN_T2_2CDLJ9EQ_SR_02122020__57.264-57.336</code>. Listening on LaBB-CAT reveals that the audio is dominated by the sound of a door closing, yet this does not appear in the noise tier.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"GOOSE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 4
# ℹ 4 variables: token_dur &lt;dbl&gt;, meanPitch &lt;chr&gt;, word &lt;chr&gt;, noise &lt;chr&gt;</code></pre>
</div>
</div>
<p>All tokens could be tracked.</p>
<p><strong>Decision:</strong> set 1000 as a lower bound for F2 and 3500 as the upper bound.</p>
</div>
<div id="tabset-1-6" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"KIT"</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-kit-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-kit-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-kit-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Figure&nbsp;11: KIT tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-kit-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-kit-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: KIT tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There are no unambiguous formant tracking errors in this sample.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"KIT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  token_dur meanPitch             word    noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;   &lt;chr&gt;
1    0.0410 "191.5691322902142 "  him     &lt;NA&gt; 
2    0.0300 "262.7920981535024 "  talking &lt;NA&gt; 
3    0.0300 "217.92105741536375 " playing &lt;NA&gt; 
4    0.0434 "248.4752065829149 "  wanted  &lt;NA&gt; 
5    0.0600 "536.9790927448698 "  in      &lt;NA&gt; 
6    0.0500 "223.86583586381417 " him     &lt;NA&gt; </code></pre>
</div>
</div>
<p>All untracked tokens were very short.</p>
<p><strong>Decision:</strong> set 1250 as a lower bound for F2 and 3500 as the upper bound.</p>
</div>
<div id="tabset-1-7" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"THOUGHT"</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-thought-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-thought-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-thought-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" title="Figure&nbsp;12: THOUGHT tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-thought-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-thought-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: THOUGHT tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The ellipse is in the right generate area of the vowel space. Visual inspection of the winning analyses reveals some common error types.</p>
<p>Many tokens are pre-liquid, and so will be filtered below. For instance, ‘fall’ is frequent in the corpus.</p>
<p>In some cases, we see what looks like F0 being marked as F1. For instance, see KSGT_STWQV47U_T1_ON_20210615_8OUAEYVRYO__108.462-108.596.</p>
<p><a href="../images/KSGT_STWQV47U_T1_ON_20210615_8OUAEYVRYO__108.462-108.596_winner_.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/KSGT_STWQV47U_T1_ON_20210615_8OUAEYVRYO__108.462-108.596_winner_.png" class="img-fluid"></a></p>
<p>Alternative analyses do better with F2, but continue to put F1 somewhere between the actual F0 and F1.</p>
<p>The token with very high F2 is <code>WES_T1_YXFY5YRO_SR_15072020__35.775-35.955</code>. It sounds more like <span class="smallcaps">lot</span>.</p>
<p><strong>Decision:</strong> set a upper bound on F2 of 2250. Set a lower bound on F1 at 350.</p>
</div>
<div id="tabset-1-8" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"LOT"</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-lot-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-lot-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-lot-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16" title="Figure&nbsp;13: LOT tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-lot-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-lot-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: LOT tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There is no obvious systematic error which could be corrected in the winning analyses. When the reading is dubious, it is not clear that there is a better reading available.</p>
<p>The token in the top right marked ‘6’ does sound more like <span class="smallcaps">thought</span> when listened to. The winning analyses makes the F2 much higher than it should be at the start of the token but the midpoint is fine.</p>
<p>HAW_T2_X6NPFKXX_SR_<em>156.155-156.307_winner</em>.png looks like it passes through empty space and, when listened to, is barely audible. We will check whether this is filtered out by the bandwidth filter.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"LOT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  token_dur meanPitch             word   noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;  &lt;chr&gt;
1    0.0400 "217.5338089762647 "  was    &lt;NA&gt; 
2    0.0500 "313.62304379028865 " want   &lt;NA&gt; 
3    0.0633 "225.72869592968598 " was    &lt;NA&gt; 
4    0.0672 "260.4524245664765 "  want   &lt;NA&gt; 
5    0.0631 "276.51206183579166 " wanted &lt;NA&gt; 
6    0.0693 "283.6773907058475 "  what   &lt;NA&gt; 
7    0.0500 "275.55503820347906 " wan~   &lt;NA&gt; </code></pre>
</div>
</div>
<p>Seven tokens were not trackable due to their length.</p>
<p><strong>Decision:</strong> Set an upper bound on F2 of 2500.</p>
</div>
<div id="tabset-1-9" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"FOOT"</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-foot-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-foot-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-foot-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17" title="Figure&nbsp;14: FOOT tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-foot-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-foot-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;14: FOOT tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There are no obvious systematic errors in the winning analyses.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"FOOT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 4
  token_dur meanPitch             word    noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;   &lt;chr&gt;
1    0.0600 "242.1218152295943 "  bushes  &lt;NA&gt; 
2    0.0676 "247.1594924146921 "  looking &lt;NA&gt; 
3    0.0300 "--undefined-- "      bush    &lt;NA&gt; 
4    0.0378 "282.90901620255266 " put     &lt;NA&gt; 
5    0.0300 "--undefined-- "      bushes  &lt;NA&gt; 
6    0.0600 "247.11322455270428 " put     &lt;NA&gt; 
7    0.0400 "--undefined-- "      woods   &lt;NA&gt; 
8    0.0657 "219.9984549275185 "  goodbye &lt;NA&gt; </code></pre>
</div>
</div>
<p>There were eight untrackable tokens in the sample.</p>
</div>
<div id="tabset-1-10" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-10-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"START"</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-start-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-start-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-start-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18" title="Figure&nbsp;15: START tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-start-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-start-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15: START tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There is a very wide spread of both F1 and F2 values in this sample. Manual inspection shows a fairly typical range of errors.</p>
<p>The token <code>HAW_T2_BBF9Y0IL_SR__107.098-107.198</code> shows the kind of problem which can occur when F1 and F2 are very close:</p>
<p><a href="../images/HAW_T2_BBF9Y0IL_SR__107.098-107.198_comparison.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="../images/HAW_T2_BBF9Y0IL_SR__107.098-107.198_comparison.png" class="img-fluid"></a></p>
<p>There is no good analysis here, presumably because the real F1 and F2 are both somewhere between 100 and 1500Hz.</p>
<p>One question with <span class="smallcaps">start</span> is whether <code>Tama</code> is being produced with <span class="smallcaps">start</span> or <span class="smallcaps">trap</span>. Are the instances with <span class="smallcaps">trap</span> F2 above 2000Hz in this sample all instances of ‘Tama’?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"START"</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    f2 <span class="sc">&gt;</span> <span class="dv">2000</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    file, word</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  file                                                     word 
  &lt;chr&gt;                                                    &lt;chr&gt;
1 P3NP_WE3NU3LF_T4_ON_20211206_E9IBMMHNC1__118.881-118.991 tama 
2 AV6E_5B0GYT5M_T4_ON_20211124_X58LBYV5GE__16.985-17.115   tama 
3 AV6E_ZCBCIU5R_T4_ON_20211117_8ZCAOHF2RO__0.105-0.175     tama </code></pre>
</div>
</div>
<p>It may be wise to remove ‘Tama’ tokens if analysing <span class="smallcaps">start</span>. This vowel is not analysed in this paper, so we leave this as a note for future projects.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracked_summary</span>(<span class="st">"START"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  token_dur meanPitch             word   noise
      &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;  &lt;chr&gt;
1    0.0300 "--undefined-- "      after  &lt;NA&gt; 
2    0.0300 "360.3546169469465 "  can't  &lt;NA&gt; 
3    0.0300 "268.69000388346944 " laughs &lt;NA&gt; 
4    0.0700 "267.82770011358997 " tama   &lt;NA&gt; 
5    0.0400 "254.178174577578 "   tama   &lt;NA&gt; </code></pre>
</div>
</div>
<p>Five very short tokens were excluded.</p>
<p><strong>Decision:</strong> Set lower bound on F2 at 900.</p>
</div>
<div id="tabset-1-11" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-11-tab">
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>fasttrack_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    tracked,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"STRUT"</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs_ft</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-strut-sample" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-strut-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-strut-sample-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20" title="Figure&nbsp;16: STRUT tokens in sample. Numbers indicate which FastTrack analysis won."><img src="SM1_formants_files/figure-html/fig-strut-sample-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-strut-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;16: STRUT tokens in sample. Numbers indicate which FastTrack analysis won.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There are some extreme outliers here.</p>
<p>The token marked ‘22’ at the left of the image is <code>AV6E_ZCBCIU5R_T1_ON_20210623_ZFICT8NP0J__103.079-103.159</code> and is an instance of a formant being drawn through empty space. It is likely to be filtered out either by the standard deviation filter or the bandwidth filter. We will check this below.</p>
<p>The very low F1, marked ‘16’ at the top of the plot, is an instance were there is a very faint line which might be the F1 at around 700Hz. The token is <code>HAW_T2_FLAGGED_KXU13BOU_SR__61.462-61.595</code>. None of the alternative analyses seem to pick this up, so it will not be fixed by setting a hard bound on formants. We will check whether it is filtered out at the end of the filtering stages.</p>
<p><strong>Decision:</strong> Set lower bound on F2 at 900.</p>
</div>
<div id="tabset-1-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-12-tab">
<p>We won’t manually check <span class="smallcaps">schwa</span> as it will be filtered out before the full analysis (following previous research on the NZE vowel system, cited throughout the paper).</p>
</div>
</div>
</div>
</section>
</section>
<section id="sec-apply" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="sec-apply"><span class="header-section-number">4.2.2</span> Apply FastTrack to all tokens</h3>
<p>In order to apply the settings we have determined above, we must first extract the audio for each token. This requires all of the sounds to be in a <code>sounds</code> folder and a <code>file_information.csv</code> file which tells FastTrack about each file (in particular, it says which vowel category a sound belongs to so the correct limits can be applied.</p>
<p>The formant bounds determined above are, as a table:</p>
<table class="table">
<thead>
<tr class="header">
<th>Vowel</th>
<th>F1 (lower)</th>
<th>F2 (upper)</th>
<th>F2 (lower)</th>
<th>F2 (upper)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>START</td>
<td>350</td>
<td>1500</td>
<td>900</td>
<td>3500</td>
</tr>
<tr class="even">
<td>THOUGHT</td>
<td>350</td>
<td>1500</td>
<td>500</td>
<td>2250</td>
</tr>
<tr class="odd">
<td>TRAP</td>
<td>350</td>
<td>1500</td>
<td>1200</td>
<td>3500</td>
</tr>
<tr class="even">
<td>NURSE</td>
<td>350</td>
<td>1500</td>
<td>1200</td>
<td>3500</td>
</tr>
<tr class="odd">
<td>DRESS</td>
<td>350</td>
<td>1500</td>
<td>1500</td>
<td>4000</td>
</tr>
<tr class="even">
<td>FLEECE</td>
<td>350</td>
<td>1500</td>
<td>1500</td>
<td>4000</td>
</tr>
<tr class="odd">
<td>KIT</td>
<td>350</td>
<td>1500</td>
<td>1250</td>
<td>3500</td>
</tr>
<tr class="even">
<td>LOT</td>
<td>350</td>
<td>1500</td>
<td>500</td>
<td>2500</td>
</tr>
<tr class="odd">
<td>GOOSE</td>
<td>350</td>
<td>1500</td>
<td>1000</td>
<td>3500</td>
</tr>
<tr class="even">
<td>FOOT</td>
<td>350</td>
<td>1500</td>
<td>500</td>
<td>3500</td>
</tr>
<tr class="odd">
<td>STRUT</td>
<td>350</td>
<td>1500</td>
<td>900</td>
<td>3500</td>
</tr>
</tbody>
</table>
<p>We will also increase the minimum cut off for the back vowels to 5500Hz rather than 5000Hz.</p>
<p>Note that we set the same bounds for F1 across all vowels and add some additional values beyond those specified in the vowel-by-vowel analysis above (i.e., we fill out the table with default values).</p>
<p>These are applied to the <strong>mean formant value</strong> of the selected analysis. This means that the midpoint formant reading can fall outside of the bounds we specify. We decided not to attempt to modify the FastTrack code to apply the formant value limits to the midpoint.</p>
<p>Local processing needs to be done for each vowel type. The resulting directory structure is:</p>
<ul>
<li>local processing directory.
<ul>
<li><code>Front</code>
<ul>
<li><code>sounds</code>
<ul>
<li>Sound files here.</li>
</ul></li>
<li><code>file_information.csv</code></li>
</ul></li>
<li><code>Back</code>
<ul>
<li><code>sounds</code>
<ul>
<li>Sound files here.</li>
</ul></li>
<li><code>file_information.csv</code></li>
</ul></li>
<li><code>Other</code>
<ul>
<li><code>sounds</code>
<ul>
<li>Sound files here.</li>
</ul></li>
<li><code>file_information.csv</code></li>
</ul></li>
</ul></li>
</ul>
<p>The following code block creates this structure and downloads the data.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># It is likely you will want to process these outside of your project directory.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the `path_to_local_processing` variable to store the path to your local</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># processing directory.</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>path_to_local_processing <span class="ot">&lt;-</span> <span class="st">'/home/jwb/Documents/kids_local_processing/'</span> <span class="co"># Modify this string.</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Establish front, back and mid categories.</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>      vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'FLEECE'</span>, <span class="st">'DRESS'</span>, <span class="st">'NURSE'</span>, <span class="st">'GOOSE'</span>, <span class="st">'TRAP'</span>, <span class="st">'KIT'</span>) <span class="sc">~</span> <span class="st">"Front"</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>      vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'LOT'</span>, <span class="st">'THOUGHT'</span>, <span class="st">'FOOT'</span>) <span class="sc">~</span> <span class="st">"Back"</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"Other"</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create directory structure</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="st">"Front"</span>, <span class="st">"Back"</span>, <span class="st">"Other"</span>)) {</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(path_to_local_processing, i, <span class="st">"sounds"</span>), </span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">recursive =</span> <span class="cn">TRUE</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Starting nzilbb.labbcat within 'map' doesn't always trigger authentication so we </span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="co"># call getLayerIds here as a way to ensure we are authenticated.</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a><span class="fu">getLayerIds</span>(labbcat.url)</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract audio files.</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>match_extraction <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vowel_type) <span class="sc">%&gt;%</span> </span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">extracted_files =</span> <span class="fu">map2</span>(</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>      data, </span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>      vowel_type,</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">getSoundFragments</span>(</span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>        labbcat.url,</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">ids =</span> .x<span class="sc">$</span>transcript,</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">start.offsets =</span> .x<span class="sc">$</span>start <span class="sc">-</span> <span class="fl">0.025</span>,</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">end.offsets =</span> .x<span class="sc">$</span>end <span class="sc">-</span> <span class="fl">0.025</span>,</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">path =</span> <span class="fu">paste0</span>(path_to_local_processing, .y, <span class="st">"/sounds"</span>)</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>match_extraction <span class="ot">&lt;-</span> match_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">map2</span>(</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>      data, </span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>      extracted_files, </span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">mutate</span>(</span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>        .x, </span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="fu">str_extract</span>(.y, <span class="st">"[A-Za-z0-9_</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">-]*$"</span>)</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_info =</span> <span class="fu">map</span>(</span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>      vowel_type, </span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">makefileinformation</span>(<span class="fu">paste0</span>(path_to_local_processing, .x))</span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>match_extraction <span class="ot">&lt;-</span> match_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_info =</span> <span class="fu">map2</span>(</span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>      file_info,</span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>      data,</span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> .x <span class="sc">%&gt;%</span></span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">left_join</span>(</span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>          .y <span class="sc">%&gt;%</span> </span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(file, vowel)</span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="sc">-</span>label) <span class="sc">%&gt;%</span> </span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename</span>(</span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true" tabindex="-1"></a>          <span class="at">label =</span> vowel</span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true" tabindex="-1"></a>        <span class="fu">relocate</span>(number, file, label)</span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-81"><a href="#cb46-81" aria-hidden="true" tabindex="-1"></a><span class="co"># save file info</span></span>
<span id="cb46-82"><a href="#cb46-82" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(</span>
<span id="cb46-83"><a href="#cb46-83" aria-hidden="true" tabindex="-1"></a>  match_extraction<span class="sc">$</span>file_info,</span>
<span id="cb46-84"><a href="#cb46-84" aria-hidden="true" tabindex="-1"></a>  match_extraction<span class="sc">$</span>vowel_type, </span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">write_csv</span>(</span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true" tabindex="-1"></a>    .x, </span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb46-88"><a href="#cb46-88" aria-hidden="true" tabindex="-1"></a>      path_to_local_processing,</span>
<span id="cb46-89"><a href="#cb46-89" aria-hidden="true" tabindex="-1"></a>      .y,</span>
<span id="cb46-90"><a href="#cb46-90" aria-hidden="true" tabindex="-1"></a>      <span class="st">"/file_information.csv"</span></span>
<span id="cb46-91"><a href="#cb46-91" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb46-92"><a href="#cb46-92" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-93"><a href="#cb46-93" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-94"><a href="#cb46-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-95"><a href="#cb46-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to link each token with its audio file.</span></span>
<span id="cb46-96"><a href="#cb46-96" aria-hidden="true" tabindex="-1"></a>token2file <span class="ot">&lt;-</span> match_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb46-97"><a href="#cb46-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vowel_type, data) <span class="sc">%&gt;%</span> </span>
<span id="cb46-98"><a href="#cb46-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb46-99"><a href="#cb46-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MatchId, vowel_type, file)</span>
<span id="cb46-100"><a href="#cb46-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-101"><a href="#cb46-101" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(token2file, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'token2file.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>We now run FastTrack on each vowel type separately as we did in the previous sections to determine the settings to use.</p>
<p>We load the winning formant tracks and take their midpoint with the following code block.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">vowel_type =</span> <span class="fu">c</span>(<span class="st">"Back"</span>, <span class="st">"Front"</span>, <span class="st">"Other"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_list =</span> <span class="fu">map</span>(</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>      vowel_type,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">list.files</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>          <span class="fu">here</span>(path_to_local_processing, .x, <span class="st">'formants_winners'</span>), </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">full.names=</span>T</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(file_list)</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>get_midpoint_values <span class="ot">&lt;-</span> <span class="cf">function</span>(formant_path) {</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">formant.read</span>(formant_path)</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># find midpoint</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>  f_mid <span class="ot">&lt;-</span> <span class="fu">round</span>(f<span class="sc">$</span>nx<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get f1, f2 and f3 values at midpoint + bandwidths for each</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>  formant_values <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    f<span class="sc">$</span>frame[[f_mid]]<span class="sc">$</span>frequency[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>    f<span class="sc">$</span>frame[[f_mid]]<span class="sc">$</span>bandwidth[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="co"># get midpoints</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">formant_values =</span> <span class="fu">map</span>(file_list, get_midpoint_values)</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(formant_values, <span class="at">names_sep =</span> <span class="st">"F"</span>)</span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">F1_50 =</span> formant_valuesF1,</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">F2_50 =</span> formant_valuesF2,</span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">F3_50 =</span> formant_valuesF3,</span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">F1_band =</span> formant_valuesF4,</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">F2_band =</span> formant_valuesF5,</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">F3_band =</span> formant_valuesF6</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the correspondence between tokens and flies.</span></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>token2file <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'token2file.rds'</span>))</span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="co"># join file with vowels.</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>    token2file</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>formants <span class="ot">&lt;-</span> formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove full path.</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="fu">str_extract</span>(file_list, <span class="st">'[A-Za-z0-9_</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">-]*</span><span class="sc">\\</span><span class="st">.Formant$'</span>),</span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Change suffix</span></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="fu">str_replace</span>(file, <span class="st">'_winner_</span><span class="sc">\\</span><span class="st">.Formant'</span>, <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>),</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>    formants <span class="sc">%&gt;%</span> </span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(file, F1_50, F2_50, F3_50, F1_band, F2_band, F3_band)</span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(vowels, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'tracked_vowels.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Note that we have extracted F3 measurements as part of our dataset. We don’t use them in the analysis, but they may be useful for other researchers and for post-hoc analysis.</p>
</section>
<section id="sec-validation" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="sec-validation"><span class="header-section-number">4.2.3</span> Validate settings</h3>
<p>We again take a sample of tokens, and look to see how well the current settings perform. This time, unlike in Section (<a href="#sec-vowel-by-vowel" class="quarto-xref">Section&nbsp;4.2.1.1</a>), we create a list of tokens to look at from the local processing directory and copy them across to a validation directory within the project folder. This is shared in the project repository.</p>
<div class="cell">
<details class="code-fold">
<summary>To view code click here</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>validation_samples <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"vowel"</span>, <span class="at">n =</span> <span class="dv">25</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co"># We save information about which tokens are in the samples.</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(validation_samples, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'validation_samples.rds'</span>))</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Some code is needed to gather these samples up.</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co"># generate image name. </span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>validation_samples<span class="sc">$</span>file[[<span class="dv">1</span>]]</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(validation_samples<span class="sc">$</span>file[[<span class="dv">1</span>]], <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create location for the validation samples</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(vowels<span class="sc">$</span>vowel)) {</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'validation'</span>, i), </span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">recursive =</span> <span class="cn">TRUE</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="co"># transfer image files.</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(validation_samples<span class="sc">$</span>file)) {</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">file.copy</span>(</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">from =</span> <span class="fu">paste0</span>(</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>      path_to_local_processing, </span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>      validation_samples<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>      <span class="st">"/images_winners/"</span>,</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace</span>(validation_samples<span class="sc">$</span>file[[i]], <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">to =</span> <span class="fu">here</span>(</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">"validation"</span>,</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>      validation_samples<span class="sc">$</span>vowel[[i]],</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace</span>(validation_samples<span class="sc">$</span>file[[i]], <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>We again use a collection of tabs to see the results for each vowel.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In each of the tabs below, you can click on the plots to enlarge them.</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">DRESS</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">FLEECE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">TRAP</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">NURSE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false" href="">GOOSE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false" href="">KIT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false" href="">THOUGHT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" role="tab" aria-controls="tabset-2-8" aria-selected="false" href="">LOT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-9" role="tab" aria-controls="tabset-2-9" aria-selected="false" href="">FOOT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-10" role="tab" aria-controls="tabset-2-10" aria-selected="false" href="">START</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-11" role="tab" aria-controls="tabset-2-11" aria-selected="false" href="">STRUT</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-12" role="tab" aria-controls="tabset-2-12" aria-selected="false" href="">SCHWA</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>plot_validation_images <span class="ot">&lt;-</span> <span class="cf">function</span>(vowel) {</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  images <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">here</span>(<span class="st">'validation'</span>, vowel), <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (image <span class="cf">in</span> images) {</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    to_plot <span class="ot">&lt;-</span> <span class="fu">load.image</span>(image)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(to_plot, <span class="at">main =</span> <span class="fu">str_extract</span>(image, <span class="st">'[A-Za-z0-9</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">-</span><span class="sc">\\</span><span class="st">_]*$'</span>))</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"DRESS"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-1.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-2.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-3.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-4.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-5.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-6.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-7.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-8.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-9.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-10.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-11.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-12.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-13.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-14.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-15.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-16.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-17.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-18.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-19.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-20.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-41-21.png" class="lightbox" data-gallery="dress-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-41-21.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"FLEECE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-1.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-2.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-3.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-4.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-5.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-6.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-7.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-8.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-9.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-10.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-11.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-12.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-13.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-14.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-15.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-16.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-17.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-18.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-19.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-20.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-21.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-21.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-42-22.png" class="lightbox" data-gallery="fleece-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-42-22.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"TRAP"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-1.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-2.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-3.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-4.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-5.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-6.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-7.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-8.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-9.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-10.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-11.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-12.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-13.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-14.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-15.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-16.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-17.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-18.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-19.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-20.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-21.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-21.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-22.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-22.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-23.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-23.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-24.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-24.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-43-25.png" class="lightbox" data-gallery="trap-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-43-25.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"NURSE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-1.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-2.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-3.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-4.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-5.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-6.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-7.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-8.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-9.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-10.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-11.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-12.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-13.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-14.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-15.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-16.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-17.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-18.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-19.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-20.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-21.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-21.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-22.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-22.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-23.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-23.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-44-24.png" class="lightbox" data-gallery="nurse-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-44-24.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"GOOSE"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-1.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-2.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-3.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-4.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-5.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-6.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-7.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-8.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-9.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-10.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-11.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-12.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-13.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-14.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-15.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-16.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-17.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-18.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-19.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-20.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-21.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-21.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-22.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-22.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-23.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-23.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-24.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-24.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-45-25.png" class="lightbox" data-gallery="goose-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-45-25.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"KIT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-1.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-2.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-3.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-4.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-5.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-6.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-7.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-8.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-9.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-10.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-11.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-12.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-13.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-14.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-15.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-16.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-17.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-18.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-19.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-20.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-46-21.png" class="lightbox" data-gallery="kit-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-46-21.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"THOUGHT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-1.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-2.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-3.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-4.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-5.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-6.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-7.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-8.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-9.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-10.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-11.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-12.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-13.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-14.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-15.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-16.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-17.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-18.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-19.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-47-20.png" class="lightbox" data-gallery="thought-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-47-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-8-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"LOT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-1.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-2.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-3.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-4.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-5.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-6.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-7.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-8.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-9.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-10.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-11.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-12.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-13.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-14.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-15.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-16.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-17.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-18.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-48-19.png" class="lightbox" data-gallery="lot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-48-19.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-9-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"FOOT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-1.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-2.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-3.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-4.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-5.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-6.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-7.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-8.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-9.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-10.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-11.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-12.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-13.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-14.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-15.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-16.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-49-17.png" class="lightbox" data-gallery="foot-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-49-17.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-10-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"START"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-1.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-2.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-3.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-4.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-5.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-6.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-7.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-8.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-9.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-10.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-11.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-12.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-13.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-14.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-15.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-16.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-17.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-18.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-19.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-20.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-21.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-21.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-22.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-22.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-23.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-23.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-50-24.png" class="lightbox" data-gallery="start-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-50-24.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-11-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"STRUT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-1.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-2.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-3.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-4.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-5.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-6.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-7.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-8.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-9.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-10.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-11.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-12.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-13.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-14.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-15.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-16.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-17.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-18.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-18.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-19.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-19.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-20.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-20.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-51-21.png" class="lightbox" data-gallery="strut-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-51-21.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
<div id="tabset-2-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-12-tab">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_validation_images</span>(<span class="st">"SCHWA"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-1.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-2.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-3.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-4.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-5.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-6.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-7.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-8.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-9.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-10.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-11.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-11.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-12.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-12.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-13.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-13.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-14.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-14.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-15.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-15.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-16.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-16.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-17.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-17.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-52-18.png" class="lightbox" data-gallery="schwa-images"><img src="SM1_formants_files/figure-html/unnamed-chunk-52-18.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<p>While there are some errors in the formant tracks above, they are looking good overall. Note again that we are only using F1 and F2 in this project and so do not worry too much about the quality of the F3 readings.</p>
</section>
</section>
</section>
<section id="sec-filter" class="level1 page-columns page-full" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Filtering and New Variables</h1>
<p>We load the tracked formants.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up vowels as a factor</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">as.factor</span>(vowel)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables with names ending '_count' will be used at the end of the markdown</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co"># to plot the filtering process.</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>initial_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>initial_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16045</code></pre>
</div>
</div>
<p>We output the plot in <a href="#fig-all-default" class="quarto-xref">Figure&nbsp;1</a> again on the left and the results of locally processing the tokens on the right.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>ft_modified_plot <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove fast track default data.</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>F1, <span class="sc">-</span>F2</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace with locally tracked values</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">F1 =</span> F1_50,</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">F2 =</span> F2_50</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vs</span>(<span class="at">vowel_colours=</span>vowel_colours) <span class="sc">+</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"F1 and F2 for All Monophthongs"</span>,</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Local processing, 1 s.d. ellipses."</span>,</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"Vowel"</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>combined_ft_plot <span class="ot">&lt;-</span> ft_default_plot <span class="sc">+</span> ft_modified_plot <span class="sc">+</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">'collect'</span>)</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>combined_ft_plot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-all-alt" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-all-alt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-all-alt-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-278" title="Figure&nbsp;17: All monophthong tokens, with default FastTrack settings (left) and modified settings (right)."><img src="SM1_formants_files/figure-html/fig-all-alt-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-all-alt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;17: All monophthong tokens, with default FastTrack settings (left) and modified settings (right).
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-all-alt" class="quarto-xref">Figure&nbsp;17</a> is not incredibly revealing. However, we do see some desired tightening of the F2 ranges for many of these vowels.</p>
<p>We now move on to a series of filtering steps.</p>
<section id="demographic-factors" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="demographic-factors"><span class="header-section-number">5.1</span> Demographic Factors</h2>
<p>We remove speakers who do not have English amongst their home languages.</p>
<p>The possible values for <code>home_language</code> are: English, Indian, Samoan, Hindi, English/Samoan, Tagalog/English, Gujarati, English/understands Māori and Samoan, Māori/English, Russian, Japanese, English?, Malayalam. We select those values which include English.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(home_language, <span class="st">"English"</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>language_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="linguistic-factors-stress-stopwords-duration-and-following-environment" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="linguistic-factors-stress-stopwords-duration-and-following-environment"><span class="header-section-number">5.2</span> Linguistic Factors: Stress, Stopwords, Duration and Following Environment</h2>
<p>Rather than filtering the bulk of our data as in <span class="citation" data-cites="Brand_2021">(<a href="#ref-Brand_2021" role="doc-biblioref">Brand et al. 2021</a>)</span>, we create a series of variables which are related to systematic errors in formant tracking and which which can be incorporated into our models.</p>
<p>For instance, instead of removing all stop words or unstressed variables, we will allow for the effect of these linguistic phenomena to be controlled in our models.</p>
<p>We do this because data is at a premium in this study. We have very low token counts for many of the children in the corpus as compared with corpora of adult speech. In large adult corpora it is possible to be more relaxed about removing tokens.</p>
<p>We track unstressed vowels, but remove tokens of <span style="font-variant:
small-caps;">schwa</span> and tokens from the words “hana”, “hanas”, and “hana’s” as they are variably produced with Māori pronunciation (more like <span class="smallcaps">start</span>) or as in “Hannah” (<span class="smallcaps">trap</span>).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">stressed =</span> stress <span class="sc">!=</span> <span class="st">"0"</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SCHWA"</span>, <span class="st">"FOOT"</span>),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>word <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"hana"</span>, <span class="st">"hanas"</span>, <span class="st">"hana's"</span>)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">droplevels</span>(vowel)</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>word_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>word_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11841</code></pre>
</div>
</div>
<p>We remove tokens without orthography and words containing hesitations. We create a variable to indicate whether a word is a stop word.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(word),</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">"~"</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>stopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># List from Brand 2021.</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">'a'</span>, <span class="st">'ah'</span>, <span class="st">'ahh'</span>, <span class="st">'am'</span>, <span class="st">'an'</span>, <span class="st">'and'</span>, <span class="st">'are'</span>, <span class="st">"aren't"</span>, <span class="st">'as'</span>, <span class="st">'at'</span>,</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">'aw'</span>, <span class="st">'because'</span>, <span class="st">'but'</span>, <span class="st">'could'</span>, <span class="st">'do'</span>, <span class="st">"don't"</span>, <span class="st">'eh'</span>, <span class="st">'for'</span>, <span class="st">'from'</span>, <span class="st">'gonna'</span>,</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">'had'</span>, <span class="st">'has'</span>, <span class="st">'have'</span>, <span class="st">'he'</span>, <span class="st">"he's"</span>, <span class="st">'her'</span>, <span class="st">'high'</span>, <span class="st">'him'</span>, <span class="st">'huh'</span>, <span class="st">'i'</span>, <span class="st">"i'll"</span>,</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"i'm"</span>, <span class="st">"i've"</span>, <span class="st">"i'd"</span>, <span class="st">'in'</span>, <span class="st">'into'</span>, <span class="st">'is'</span>, <span class="st">'it'</span>, <span class="st">"it's"</span>, <span class="st">'its'</span>, <span class="st">'just'</span>, <span class="st">'mean'</span>,</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">'my'</span>, <span class="st">'nah'</span>, <span class="st">'not'</span>, <span class="st">'of'</span>, <span class="st">'oh'</span>, <span class="st">'on'</span>, <span class="st">'or'</span>, <span class="st">'our'</span>, <span class="st">'says'</span>, <span class="st">'she'</span>, <span class="st">"she's"</span>,</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">'should'</span>, <span class="st">'so'</span>, <span class="st">'than'</span>, <span class="st">'that'</span>, <span class="st">"that's"</span>, <span class="st">'the'</span>, <span class="st">'them'</span>, <span class="st">'there'</span>, <span class="st">"there's"</span>,</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">'they'</span>, <span class="st">'this'</span>, <span class="st">'to'</span>, <span class="st">'uh'</span>, <span class="st">'um'</span>, <span class="st">'up'</span>, <span class="st">'was'</span>, <span class="st">"wasn't"</span>, <span class="st">'we'</span>, <span class="st">'were'</span>, <span class="st">'what'</span>,</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">'when'</span>, <span class="st">'which'</span>, <span class="st">'who'</span>, <span class="st">'with'</span>, <span class="st">'would'</span>, <span class="st">'yeah'</span>, <span class="st">'you'</span>, <span class="st">"you've"</span>,</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Additional identified stop words.</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"then"</span>, <span class="st">"me"</span>, <span class="st">"too"</span>, <span class="st">"his"</span>,  <span class="st">"off"</span>, <span class="st">"onto"</span>, <span class="st">"can't"</span>, <span class="st">"can"</span>, <span class="st">"cos"</span>, <span class="st">"said"</span>, </span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"where"</span>)</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">stopword =</span> word <span class="sc">%in%</span> stopwords</span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>na_word_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>na_word_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11827</code></pre>
</div>
</div>
<p>We create a variable to track following segment category and remove tokens preceding liquids.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">following_segment_category =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fct_na_value_to_level</span>(<span class="fu">as_factor</span>(following_segment)),</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">labial =</span> <span class="fu">c</span>(<span class="st">'m'</span>, <span class="st">'p'</span>, <span class="st">'b'</span>, <span class="st">'f'</span>, <span class="st">'w'</span>),</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">velar =</span> <span class="fu">c</span>(<span class="st">'k'</span>, <span class="st">'g'</span>, <span class="st">'N'</span>),</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">liquid =</span> <span class="fu">c</span>(<span class="st">'r'</span>, <span class="st">'l'</span>),</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">final =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">other_level =</span> <span class="st">"other"</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    following_segment_category <span class="sc">!=</span> <span class="st">'liquid'</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>liquid_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>liquid_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11100</code></pre>
</div>
</div>
</section>
<section id="formant-tracking-errors" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="formant-tracking-errors"><span class="header-section-number">5.3</span> Formant Tracking Errors</h2>
<p>We filter out untracked tokens. These are typically untracked due to being too short for FastTrack to function. Examples of this were shown above in <a href="#sec-vowel-by-vowel" class="quarto-xref">Section&nbsp;4.2.1.1</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(F1_50)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>na_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>na_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9285</code></pre>
</div>
</div>
<p>Tokens were annotated for background noise. We remove any token which falls in an identified noisy section of audio.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(noise)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>noise_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>noise_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9162</code></pre>
</div>
</div>
<p>We now carry out a bandwidth-based filtering step. The bandwidth represents the span of frequencies with amplitude within +- 3dB of the identified peak. This is particularly important in situations where a non-existent formant is picked out. We’ve seen a couple of examples of this in our initial determination of FastTrack settings and in our validation of our formant tracking settings ( again, see <a href="#sec-vowel-by-vowel" class="quarto-xref">Section&nbsp;4.2.1.1</a>). In cases, as in <span style="font-variant:
small-caps;">fleece</span> tokens with a very high actual F2, we sometimes end up with a putative F2 being traced through the more-or-less empty space in the spectrogram between F1 and the (very high) F2. In cases like this, the formant bandwidth will be very high. On the other hand, very very small bandwidths are likely when certain kinds of noise are being tracked rather than speech.</p>
<p>First, let’s look at the distribution of bandwidths for F1 and F2.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>F3_band</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">contains</span>(<span class="st">'_band'</span>),</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">'bandwidth'</span>,</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">'formant_type'</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">formant_type =</span> <span class="fu">str_replace</span>(formant_type, <span class="st">'_band'</span>, <span class="st">''</span>)</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> bandwidth,</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> formant_type</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">linewidth=</span><span class="dv">1</span>, <span class="at">stat=</span><span class="st">"density"</span>) <span class="sc">+</span></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2000</span>)) <span class="sc">+</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Formant Bandwidths"</span></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-61-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-279"><img src="SM1_formants_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>These have very large right tails, along with a sizable number of tokens with very low bandwidths (although this is harder to see).</p>
<p>Let’s look at some examples. First, we define some variables which contain tokens with bandwidth above 500Hz (high bandwidth) and tokens with bandwidth below 10Hz (low bandwidth).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A subsequent fix to vowel filtering means that this block no longer produces</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the examples we look at below. It remains here to show the code which </span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co"># originally generated the sample.</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">500</span>)</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>high_f1_bandwidth <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    F1_band <span class="sc">&gt;</span> <span class="dv">500</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>high_f2_bandwidth <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>    F2_band <span class="sc">&gt;</span> <span class="dv">500</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>low_f1_bandwidth <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>    F1_band <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>low_f2_bandwidth <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a>    F2_band <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We now load some example images. The following block copies across the relevant images from the local processing folder (and so requires access to this, which the reader is unlikely to have).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>band_groups <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"high_f1"</span>, <span class="st">"high_f2"</span>, <span class="st">"low_f1"</span>, <span class="st">"low_f2"</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create location for the validation samples</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> band_groups) {</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'bandwidth'</span>, i), </span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">recursive =</span> <span class="cn">TRUE</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="co"># transfer image files.</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>transfer_images <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data, in_group) {</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(in_data<span class="sc">$</span>file)) {</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.copy</span>(</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> <span class="fu">paste0</span>(</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>        path_to_local_processing, </span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>        in_data<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"/images_winners/"</span>,</span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_replace</span>(in_data<span class="sc">$</span>file[[i]], <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">to =</span> <span class="fu">here</span>(</span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"bandwidth"</span>,</span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a>        in_group,</span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_replace</span>(in_data<span class="sc">$</span>file[[i]], <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a><span class="fu">transfer_images</span>(high_f1_bandwidth, <span class="st">"high_f1"</span>)</span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a><span class="fu">transfer_images</span>(high_f2_bandwidth, <span class="st">"high_f2"</span>)</span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a><span class="fu">transfer_images</span>(low_f1_bandwidth, <span class="st">"low_f1"</span>)</span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a><span class="fu">transfer_images</span>(low_f2_bandwidth, <span class="st">"low_f2"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The identified high f1 bandwidth tokens are plotted by the following code block.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>plot_winner <span class="ot">&lt;-</span> <span class="cf">function</span>(vowel_type, in_group, audio_filename, bandwidth) {</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  to_plot <span class="ot">&lt;-</span> <span class="fu">load.image</span>(</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">'bandwidth'</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>      in_group,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace</span>(audio_filename, <span class="st">'</span><span class="sc">\\</span><span class="st">.wav'</span>, <span class="st">'_winner_.png'</span>)</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>    to_plot, </span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="fu">paste</span>(</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">'Bandwidth:'</span>, bandwidth, <span class="st">'Hz</span><span class="sc">\n</span><span class="st">'</span>,</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>      vowel_type, <span class="fu">str_extract</span>(audio_filename, <span class="st">'[A-Za-z0-9</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">-</span><span class="sc">\\</span><span class="st">_]*$'</span>)</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axes =</span> <span class="cn">FALSE</span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Collecting a previous sample (see comment on code block 2 above)</span></span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>high_files <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="fu">list.files</span>(</span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'bandwidth'</span>, <span class="st">'high_f1'</span>)</span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a>high_files <span class="ot">&lt;-</span> high_files <span class="sc">%&gt;%</span> </span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">transcript =</span> <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__"</span>, <span class="at">group=</span><span class="dv">1</span>),</span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb78-30"><a href="#cb78-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__([0-9</span><span class="sc">\\</span><span class="st">.]*)"</span>, <span class="at">group=</span><span class="dv">2</span>)</span>
<span id="cb78-31"><a href="#cb78-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb78-32"><a href="#cb78-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">bandwidth =</span> <span class="fu">map2</span>(</span>
<span id="cb78-33"><a href="#cb78-33" aria-hidden="true" tabindex="-1"></a>      transcript, start, </span>
<span id="cb78-34"><a href="#cb78-34" aria-hidden="true" tabindex="-1"></a>      \(t, s) {</span>
<span id="cb78-35"><a href="#cb78-35" aria-hidden="true" tabindex="-1"></a>        vowels <span class="sc">%&gt;%</span> </span>
<span id="cb78-36"><a href="#cb78-36" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(</span>
<span id="cb78-37"><a href="#cb78-37" aria-hidden="true" tabindex="-1"></a>            transcript <span class="sc">==</span> <span class="fu">paste0</span>(t, <span class="st">'.slt'</span>),</span>
<span id="cb78-38"><a href="#cb78-38" aria-hidden="true" tabindex="-1"></a>            <span class="fu">between</span>(start, s<span class="fl">-0.05</span>, s<span class="fl">+0.05</span>)</span>
<span id="cb78-39"><a href="#cb78-39" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb78-40"><a href="#cb78-40" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(vowel, vowel_type, F1_band)</span>
<span id="cb78-41"><a href="#cb78-41" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb78-42"><a href="#cb78-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb78-43"><a href="#cb78-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb78-44"><a href="#cb78-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(bandwidth)</span>
<span id="cb78-45"><a href="#cb78-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-46"><a href="#cb78-46" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(high_files<span class="sc">$</span>filename)) {</span>
<span id="cb78-47"><a href="#cb78-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_winner</span>(</span>
<span id="cb78-48"><a href="#cb78-48" aria-hidden="true" tabindex="-1"></a>    high_files<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb78-49"><a href="#cb78-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">'high_f1'</span>,</span>
<span id="cb78-50"><a href="#cb78-50" aria-hidden="true" tabindex="-1"></a>    high_files<span class="sc">$</span>filename[[i]],</span>
<span id="cb78-51"><a href="#cb78-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(high_files<span class="sc">$</span>F1_band[[i]])</span>
<span id="cb78-52"><a href="#cb78-52" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb78-53"><a href="#cb78-53" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-1.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-2.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-3.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-4.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-5.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-6.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-7.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-8.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-9.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-64-10.png" class="lightbox" data-gallery="high-f1-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-64-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
<p>When looking at these it is important to note that the formant and bandwidth readings we are using are midpoint readings.</p>
<p>These are <em>high bandwidth</em> tokens for F1. We are looking to confirm that these are indeed <em>bad readings</em>. We are looking at the yellow lines at the midpoint.</p>
<p>There are a few different error types here. In some cases, we have very wide, thick, black bars in which it is difficult to discern F1 as distinct from F0 and F2 (e.g.&nbsp;<code>AV6E_2CDLJ9EQ_...</code>). We also have the opposite problem (wide empty spaces) in other tokens (<code>HAW_T1_BBF9Y0IL...</code> and <code>HAW_T1_BBF9Y0IL...</code>). There are other, quite chaotic tokens (e.g.&nbsp;<code>P3NP_WE3NU3LF_T4...</code>). Some tokens look OK, such as <code>HAW_T2_JPEJCXCI_...</code>. However, the bandwidth on this token is in fact higher than that of tokens which look bad (e.g.&nbsp;<code>ECA5_TKAB8B7Y...</code>). This is likely unavoidable (as is often the case when filtering data).</p>
<p>We now look at high bandwidth F2 tokens (the green lines):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collecting a previous sample (see comment on code block 2 above)</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>high_f2_files <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="fu">list.files</span>(</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'bandwidth'</span>, <span class="st">'high_f2'</span>)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>high_f2_files <span class="ot">&lt;-</span> high_f2_files <span class="sc">%&gt;%</span> </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">transcript =</span> <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__"</span>, <span class="at">group=</span><span class="dv">1</span>),</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__([0-9</span><span class="sc">\\</span><span class="st">.]*)"</span>, <span class="at">group=</span><span class="dv">2</span>)</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">bandwidth =</span> <span class="fu">map2</span>(</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>      transcript, start, </span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>      \(t, s) {</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>        vowels <span class="sc">%&gt;%</span> </span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>            transcript <span class="sc">==</span> <span class="fu">paste0</span>(t, <span class="st">'.slt'</span>),</span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">between</span>(start, s<span class="fl">-0.05</span>, s<span class="fl">+0.05</span>)</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(vowel, vowel_type, F2_band)</span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(bandwidth)</span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(high_f2_files<span class="sc">$</span>filename)) {</span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_winner</span>(</span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>    high_f2_files<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'high_f2'</span>,</span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>    high_f2_files<span class="sc">$</span>filename[[i]],</span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(high_f2_files<span class="sc">$</span>F2_band[[i]])</span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell quarto-layout-panel" data-layout-ncol="5">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-1.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-2.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-2.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-3.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-3.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-4.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-4.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-5.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-5.png" class="img-fluid" width="672"></a></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-6.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-6.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-7.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-7.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-8.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-8.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-9.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-9.png" class="img-fluid" width="672"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: center;">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-65-10.png" class="lightbox" data-gallery="high-f2-band"><img src="SM1_formants_files/figure-html/unnamed-chunk-65-10.png" class="img-fluid" width="672"></a></p>
</div>
</div>
</div>
<p>It looks like 500Hz is too low for our F2 cut off. The obvious errors being picked up here (including, for instance, <code>SFH9_TYZA8SPF...</code>) seem to have bandwidths above 1000Hz.</p>
<p>What happens at the other side of the distribution? i.e.&nbsp;what do tokens with <em>very low</em> bandwidth look like? First we look at F1:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collecting a previous sample (see comment on code block 2 above)</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>low_files <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="fu">list.files</span>(</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'bandwidth'</span>, <span class="st">'low_f1'</span>)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>low_files <span class="ot">&lt;-</span> low_files <span class="sc">%&gt;%</span> </span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">transcript =</span> <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__"</span>, <span class="at">group=</span><span class="dv">1</span>),</span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__([0-9</span><span class="sc">\\</span><span class="st">.]*)"</span>, <span class="at">group=</span><span class="dv">2</span>)</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">bandwidth =</span> <span class="fu">map2</span>(</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>      transcript, start, </span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>      \(t, s) {</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>        vowels <span class="sc">%&gt;%</span> </span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(</span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>            transcript <span class="sc">==</span> <span class="fu">paste0</span>(t, <span class="st">'.slt'</span>),</span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">between</span>(start, s<span class="fl">-0.05</span>, s<span class="fl">+0.05</span>)</span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(vowel, vowel_type, F1_band)</span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb80-26"><a href="#cb80-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(bandwidth)</span>
<span id="cb80-27"><a href="#cb80-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-28"><a href="#cb80-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(low_files<span class="sc">$</span>filename)) {</span>
<span id="cb80-29"><a href="#cb80-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_winner</span>(</span>
<span id="cb80-30"><a href="#cb80-30" aria-hidden="true" tabindex="-1"></a>    low_files<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb80-31"><a href="#cb80-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'low_f1'</span>,</span>
<span id="cb80-32"><a href="#cb80-32" aria-hidden="true" tabindex="-1"></a>    low_files<span class="sc">$</span>filename[[i]],</span>
<span id="cb80-33"><a href="#cb80-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(low_files<span class="sc">$</span>F1_band[[i]])</span>
<span id="cb80-34"><a href="#cb80-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb80-35"><a href="#cb80-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-300"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-301"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-302"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-303"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-304"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-5.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-305"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-6.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-306"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-7.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-307"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-8.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-308"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-9.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-66-10.png" class="lightbox" data-gallery="quarto-lightbox-gallery-309"><img src="SM1_formants_files/figure-html/unnamed-chunk-66-10.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>There’s nothing obviously wrong with these low bandwidth F1 tokens visually with the exception of <code>F5CI_S29WR30F...</code>.</p>
<p>And now F2:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collecting a previous sample (see comment on code block 2 above)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>low_f2_files <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="fu">list.files</span>(</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">'bandwidth'</span>, <span class="st">'low_f2'</span>)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>low_f2_files <span class="ot">&lt;-</span> low_f2_files <span class="sc">%&gt;%</span> </span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">transcript =</span> <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__"</span>, <span class="at">group=</span><span class="dv">1</span>),</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(filename, <span class="st">"([A-Z0-9_]*)__([0-9</span><span class="sc">\\</span><span class="st">.]*)"</span>, <span class="at">group=</span><span class="dv">2</span>)</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">bandwidth =</span> <span class="fu">map2</span>(</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>      transcript, start, </span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>      \(t, s) {</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>        vowels <span class="sc">%&gt;%</span> </span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(</span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>            transcript <span class="sc">==</span> <span class="fu">paste0</span>(t, <span class="st">'.slt'</span>),</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">between</span>(start, s<span class="fl">-0.05</span>, s<span class="fl">+0.05</span>)</span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(vowel, vowel_type, F2_band)</span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(bandwidth)</span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(low_f2_files<span class="sc">$</span>filename)) {</span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_winner</span>(</span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a>    low_f2_files<span class="sc">$</span>vowel_type[[i]],</span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'low_f2'</span>,</span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a>    low_f2_files<span class="sc">$</span>filename[[i]],</span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(low_f2_files<span class="sc">$</span>F2_band[[i]])</span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-310"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-311"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-312"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-313"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-314"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-5.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-315"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-6.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-316"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-7.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-317"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-8.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-67-9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-318"><img src="SM1_formants_files/figure-html/unnamed-chunk-67-9.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>The token <code>AV6E_2CDLJ9EQ</code> is alarming. There seems to be a non-speech sound happening and not much otherwise.</p>
<p>In the absence of a principled cut off point, we will simply track whether the bandwidth of a token is in the top 10% of the distribution for F1, F2, and F3 bandwidths.</p>
<p>The cut off values are:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">F1_band =</span> <span class="fu">quantile</span>(F1_band, <span class="fl">0.90</span>),</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">F2_band =</span> <span class="fu">quantile</span>(F2_band, <span class="fl">0.90</span>),</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">F3_band =</span> <span class="fu">quantile</span>(F3_band, <span class="fl">0.90</span>)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   F1_band  F2_band  F3_band
1 464.8311 830.4386 958.0839</code></pre>
</div>
</div>
<p>We make three variables to track this. In order to keep good F1 readings, even if the F2 reading is bad, we will separate our data into F1 and F2 datasets at the analysis stage. At that point, we will filter out the tokens with high bandwidths. But it is important at this stage to quantify how many tokens will be lost.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_f1_bandwidth =</span> F1_band <span class="sc">&gt;</span> <span class="fu">quantile</span>(F1_band, <span class="fl">0.90</span>),</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_f2_bandwidth =</span> F2_band <span class="sc">&gt;</span> <span class="fu">quantile</span>(F2_band, <span class="fl">0.90</span>),</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_f3_bandwidth =</span> F3_band <span class="sc">&gt;</span> <span class="fu">quantile</span>(F3_band, <span class="fl">0.90</span>)</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>f1_band_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">filter</span>(vowels, <span class="sc">!</span>high_f1_bandwidth))</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>f2_band_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">filter</span>(vowels, <span class="sc">!</span>high_f2_bandwidth))</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co"># If these counts aren't the same, something has gone wrong!</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>f1_band_count <span class="sc">==</span> f2_band_count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Since we are taking the top 10% of tokens, each of these variables identifies 917 tokens.</p>
<p>We remove very long tokens (with 2.5 standard deviations as our limit, within vowel)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> end <span class="sc">-</span> start,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration_s =</span> <span class="fu">scale</span>(duration)[,<span class="dv">1</span>]</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    duration_s <span class="sc">&lt;</span> <span class="fl">2.5</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>length_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Phonetic research which deploys automated formant tracking often filters out tokens above or below 2.5 standard deviations from the mean <em>within speaker</em>. This is not possible for us, as there are not enough tokens per speaker. The distribution of tokens for each speaker and collection point is as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant, collect) <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> n,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> vowel</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> <span class="dv">15</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-71-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-319"><img src="SM1_formants_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Instead of taking each speaker individually, we will work out standard deviations within age bins.</p>
<p>We use three month bins, starting from 46-48 months, and ending with 61 months and above.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_bin =</span> <span class="fu">case_when</span>(</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">46</span>, <span class="dv">48</span>) <span class="sc">~</span> <span class="st">"46-48"</span>,</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">49</span>, <span class="dv">51</span>) <span class="sc">~</span> <span class="st">"49-51"</span>,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">52</span>, <span class="dv">54</span>) <span class="sc">~</span> <span class="st">"52-54"</span>,</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">55</span>, <span class="dv">57</span>) <span class="sc">~</span> <span class="st">"55-57"</span>,</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">58</span>, <span class="dv">60</span>) <span class="sc">~</span> <span class="st">"58-60"</span>,</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">between</span>(age, <span class="dv">61</span>, <span class="dv">70</span>) <span class="sc">~</span> <span class="st">"61+"</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We also track a standard deviation limit for a set of ‘age bins’. Because speakers do not have many tokens each, we apply sd filtering at the level of age bins. We will use a cut off of 2 standard deviations.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>sd_var <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data, <span class="at">sd_limit =</span> <span class="fl">2.5</span>) {</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  vowels_all_summary <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove tokens at +/- sd limit (default 2.5 sd)</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(age_bin, vowel) <span class="sc">%&gt;%</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">#calculate the summary statistics required for the outlier removal.</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_F1_50 =</span> <span class="fu">mean</span>(F1_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_F2_50 =</span> <span class="fu">mean</span>(F2_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_F3_50 =</span> <span class="fu">mean</span>(F3_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd_F1_50 =</span> <span class="fu">sd</span>(F1_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd_F2_50 =</span> <span class="fu">sd</span>(F2_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd_F3_50 =</span> <span class="fu">sd</span>(F3_50, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Calculate cut off values.</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_F1_50 =</span> <span class="fu">mean</span>(F1_50) <span class="sc">+</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F1_50)),</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">min_F1_50 =</span> <span class="fu">mean</span>(F1_50) <span class="sc">-</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F1_50)),</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_F2_50 =</span> <span class="fu">mean</span>(F2_50) <span class="sc">+</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F2_50)),</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">min_F2_50 =</span> <span class="fu">mean</span>(F2_50) <span class="sc">-</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F2_50)),</span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_F3_50 =</span> <span class="fu">mean</span>(F3_50) <span class="sc">+</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F3_50)),</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">min_F3_50 =</span> <span class="fu">mean</span>(F3_50) <span class="sc">-</span> sd_limit<span class="sc">*</span>(<span class="fu">sd</span>(F3_50))</span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#this is the main outlier filtering step.</span></span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a>  out_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span></span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(vowels_all_summary) <span class="sc">%&gt;%</span></span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">F1_outlier =</span> <span class="fu">ifelse</span>(</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a>        F1_50 <span class="sc">&gt;</span> min_F1_50 <span class="sc">&amp;</span></span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>          F1_50 <span class="sc">&lt;</span> max_F1_50,</span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a>        <span class="cn">FALSE</span>, </span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span></span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">F2_outlier =</span> <span class="fu">ifelse</span>(</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a>        F2_50 <span class="sc">&gt;</span> min_F2_50 <span class="sc">&amp;</span></span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a>          F2_50 <span class="sc">&lt;</span> max_F2_50, </span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a>        <span class="cn">FALSE</span>, </span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span></span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">F3_outlier =</span> <span class="fu">ifelse</span>(</span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a>        F3_50 <span class="sc">&gt;</span> min_F3_50 <span class="sc">&amp;</span></span>
<span id="cb89-41"><a href="#cb89-41" aria-hidden="true" tabindex="-1"></a>          F3_50 <span class="sc">&lt;</span> max_F3_50, </span>
<span id="cb89-42"><a href="#cb89-42" aria-hidden="true" tabindex="-1"></a>        <span class="cn">FALSE</span>, </span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span></span>
<span id="cb89-44"><a href="#cb89-44" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb89-45"><a href="#cb89-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span><span class="fu">c</span>(</span>
<span id="cb89-49"><a href="#cb89-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">"mean_F1_50"</span>, <span class="st">"mean_F2_50"</span>, <span class="st">"mean_F3_50"</span>,</span>
<span id="cb89-50"><a href="#cb89-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sd_F1_50"</span>, <span class="st">"sd_F2_50"</span>, <span class="st">"sd_F3_50"</span>,</span>
<span id="cb89-51"><a href="#cb89-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">"max_F1_50"</span>, <span class="st">"min_F1_50"</span>, </span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"max_F2_50"</span>, <span class="st">"min_F2_50"</span>,</span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">"max_F3_50"</span>, <span class="st">"min_F3_50"</span></span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We apply the fucntion to generate the outlier columns.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> <span class="fu">sd_var</span>(vowels, <span class="at">sd_limit =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We check that this function works by looking at the distribution of <span class="smallcaps">dress</span> F1 in each age bin.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"DRESS"</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> F1_50,</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> F1_outlier</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> age_bin)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-75-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-320"><img src="SM1_formants_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>This looks about right. Most values identified appear on the right tail of the distributions.</p>
<p>Now we look at F2:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">==</span> <span class="st">"DRESS"</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> F2_50,</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> F2_outlier</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> age_bin)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-76-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-321"><img src="SM1_formants_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Here, the identified values tend to be on the left tail of the distribution.</p>
<p>We quantify how many outliers are identified. We also exclude high bandwidth tokens here, for the purpose of quantifying the filtering process below.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>f1_sd_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  vowels <span class="sc">%&gt;%</span> </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>high_f1_bandwidth, <span class="sc">!</span>F1_outlier)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>f2_sd_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  vowels <span class="sc">%&gt;%</span> </span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>high_f2_bandwidth, <span class="sc">!</span>F2_outlier)</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>f3_sd_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(</span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>  vowels <span class="sc">%&gt;%</span> </span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>high_f3_bandwidth, <span class="sc">!</span>F3_outlier)</span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are 1144 F1 outliers detected, 1208 F2 outliers, and 1221 F3 outliers.</p>
<p>We now track vowels with high F0. Sometimes, F0 sits on top of F1 and makes it hard to distinguish between the two.</p>
<p>Let’s look at the distribution of F0.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">meanPitch =</span> <span class="fu">as.numeric</span>(meanPitch)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    F1_50, F2_50, meanPitch</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"F1_50"</span>, <span class="st">"F2_50"</span>, <span class="st">"meanPitch"</span>),</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> value,</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> type</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="SM1_formants_files/figure-html/unnamed-chunk-78-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-322"><img src="SM1_formants_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>As expected, there’s a substantial overlap between the F0 and F1 distribution.</p>
<p>We create a variable to track the top 10% of tokens by F0.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_pitch =</span> meanPitch <span class="sc">&gt;</span> <span class="fu">quantile</span>(vowels<span class="sc">$</span>meanPitch, <span class="fl">0.90</span>, <span class="at">na.rm =</span> T)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Finally, we filter out very extreme F1 values.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(F1_50 <span class="sc">&lt;</span> <span class="dv">1500</span> <span class="sc">&amp;</span> F1_50 <span class="sc">&gt;</span> <span class="dv">350</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>extreme_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(vowels)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 9289</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>f1_extreme_count <span class="ot">&lt;-</span> f1_sd_count <span class="sc">-</span> (na_count <span class="sc">-</span> extreme_count)</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>f2_extreme_count <span class="ot">&lt;-</span> f2_sd_count <span class="sc">-</span> (na_count <span class="sc">-</span> extreme_count)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We’re left with 8752 tokens.</p>
</section>
<section id="check-previously-identified-tokens" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="check-previously-identified-tokens"><span class="header-section-number">5.4</span> Check Previously Identified Tokens</h2>
<p>We identified four tokens to check on in <a href="#sec-validation" class="quarto-xref">Section&nbsp;4.2.3</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    file <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UXX8_Z6244PSW_T4_ON_20211119_OA5SKD2NZQ__96.857-96.977.wav"</span>,</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ILA_T1_SX1LTCO7_SR_30072020__36.435-36.652.wav"</span>,</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AV6E_ZCBCIU5R_T1_ON_20210623_ZFICT8NP0J__103.079-103.159.wav"</span>,</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"HAW_T2_FLAGGED_KXU13BOU_SR__61.462-61.595.wav"</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>    transcript, participant, collect, F1_50, F2_50, noise, </span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">contains</span>(<span class="st">'outlier'</span>), <span class="fu">contains</span>(<span class="st">'band'</span>)</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width=</span><span class="st">"100%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">transcript</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">participant</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">collect</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">F1_50</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">F2_50</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">noise</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">F1_outlier</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">F2_outlier</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">F3_outlier</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">F1_band</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">F2_band</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">F3_band</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">high_f1_bandwidth</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">high_f2_bandwidth</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">high_f3_bandwidth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ILA_T1_SX1LTCO7_SR_30072020.slt</td>
<td style="text-align: left;">EC0814-Child</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">488.6436</td>
<td style="text-align: right;">2689.111</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">134.71702</td>
<td style="text-align: right;">1411.7616</td>
<td style="text-align: right;">221.74079</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="even">
<td style="text-align: left;">AV6E_ZCBCIU5R_T1_ON_20210623_ZFICT8NP0J.slt</td>
<td style="text-align: left;">EC0908-Child</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">570.1251</td>
<td style="text-align: right;">3227.628</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">68.52033</td>
<td style="text-align: right;">1326.2182</td>
<td style="text-align: right;">54.15759</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UXX8_Z6244PSW_T4_ON_20211119_OA5SKD2NZQ.slt</td>
<td style="text-align: left;">EC1809-Child</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">595.7813</td>
<td style="text-align: right;">2539.921</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">117.86033</td>
<td style="text-align: right;">225.0453</td>
<td style="text-align: right;">603.55658</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The token <code>HAW_T2_FLAGGED_KXU13BOU_SR__61.462-61.595.wav</code> has been filtered out by one of the filtering steps above so there is no need to check.</p>
<p><code>ILA_T1_SX1LTCO7_SR_30072020.slt</code> and <code>AV6E_ZCBCIU5R_T1_ON_20210623_ZFICT8NP0J.slt</code> have been correctly identified as having very high F2 bandwidth.</p>
<p>The token <code>UXX8_Z6244PSW_T4_ON_20211119_OA5SKD2NZQ__96.857-96.977.wav</code> has correctly been shifted up in F2 from the FastTrack defaults (see <a href="#sec-validation" class="quarto-xref">Section&nbsp;4.2.3</a>).</p>
</section>
</section>
<section id="sec-data-desc" class="level1 page-columns page-full" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Interim Data Description</h1>
<p>We now give a description of the data before normalisation.</p>
<section id="vowel-space" class="level2 page-columns page-full" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="vowel-space"><span class="header-section-number">6.1</span> Vowel Space</h2>
<p>First, a simple vowel space plot:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_50, F2_50</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only=</span><span class="cn">FALSE</span>, </span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">facet=</span><span class="cn">FALSE</span>, </span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ellipse=</span><span class="cn">TRUE</span>, </span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_alpha=</span><span class="fl">0.2</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Raw Formant Values After Filtering"</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-post-filt" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-post-filt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-post-filt-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-323" title="Figure&nbsp;18: Vowel space after data filtering."><img src="SM1_formants_files/figure-html/fig-post-filt-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-post-filt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18: Vowel space after data filtering.
</figcaption>
</figure>
</div>
</div>
</div>
<p>How many tokens do we have for each of these vowels?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">vowel</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">KIT</td>
<td style="text-align: right;">1945</td>
</tr>
<tr class="even">
<td style="text-align: left;">FLEECE</td>
<td style="text-align: right;">1202</td>
</tr>
<tr class="odd">
<td style="text-align: left;">STRUT</td>
<td style="text-align: right;">1033</td>
</tr>
<tr class="even">
<td style="text-align: left;">DRESS</td>
<td style="text-align: right;">1015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRAP</td>
<td style="text-align: right;">996</td>
</tr>
<tr class="even">
<td style="text-align: left;">LOT</td>
<td style="text-align: right;">762</td>
</tr>
<tr class="odd">
<td style="text-align: left;">START</td>
<td style="text-align: right;">614</td>
</tr>
<tr class="even">
<td style="text-align: left;">GOOSE</td>
<td style="text-align: right;">483</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NURSE</td>
<td style="text-align: right;">463</td>
</tr>
<tr class="even">
<td style="text-align: left;">THOUGHT</td>
<td style="text-align: right;">239</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="participant-level-summary" class="level2 page-columns page-full" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="participant-level-summary"><span class="header-section-number">6.2</span> Participant Level Summary</h2>
<p>We have 132 participants.</p>
<p>How many collections points do the participants have?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>participants_collect <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">collection_points =</span> <span class="fu">n_distinct</span>(collect)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(collection_points) <span class="sc">%&gt;%</span> </span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_participants =</span> <span class="fu">n</span>())</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>participants_collect <span class="sc">%&gt;%</span> </span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">collection_points</th>
<th style="text-align: right;">n_participants</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We have 19 participants at 3 collection points, with almost none at 4 collection points, and 51 and 60 each at collection points 1 and 2.</p>
<p>The youngest speaker in our data is 3.9 years old, and the oldest is 5.4, with a range of 18 months.</p>
<p>We look at the gender balance by participant and by token.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant) <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">first</span>(gender),</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ethnicity =</span> <span class="fu">first</span>(ethnicity),</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">home_language =</span> <span class="fu">first</span>(home_language),</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dob =</span> <span class="fu">first</span>(dob)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> gender</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Participants by gender"</span>, <span class="at">x =</span> <span class="st">"Gender"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-part-gender" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-part-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-part-gender-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-324" title="Figure&nbsp;19: Participants by gender."><img src="SM1_formants_files/figure-html/fig-part-gender-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-part-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;19: Participants by gender.
</figcaption>
</figure>
</div>
</div>
</div>
<p>There are 63 female and 69 male speakers.</p>
<p>At the level of tokens, the gender balance is:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> gender</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tokens by gender"</span>, <span class="at">x =</span> <span class="st">"Gender"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><a href="SM1_formants_files/figure-html/token-gender-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-325" title="Tokens by gender."><img src="SM1_formants_files/figure-html/token-gender-1.png" class="img-fluid figure-img" width="672" alt="Tokens by gender."></a></p>
<figcaption class="margin-caption">Tokens by gender.</figcaption>
</figure>
</div>
</div>
</div>
<p>At the token level, there are slightly more available from female speakers than male.</p>
<p>We also have ethnicity and home language information.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> ethnicity</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Participants by ethnicity"</span>, <span class="at">x =</span> <span class="st">"Ethnicity"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-part-ethnicity" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-part-ethnicity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-part-ethnicity-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-326" title="Figure&nbsp;20: Participant ethnicity"><img src="SM1_formants_files/figure-html/fig-part-ethnicity-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-part-ethnicity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20: Participant ethnicity
</figcaption>
</figure>
</div>
</div>
</div>
<p>Dominance by NZ Europeans. Not too surprising given the demographics of Christchurch, New Zealand.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> home_language</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Participants by home language"</span>, <span class="at">x =</span> <span class="st">"Home language"</span>) <span class="sc">+</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>)</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-part-language" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-part-language-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-part-language-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-327" title="Figure&nbsp;21: Participant home languages"><img src="SM1_formants_files/figure-html/fig-part-language-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-part-language-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21: Participant home languages
</figcaption>
</figure>
</div>
</div>
</div>
<p>We decided above to filter by English being one of the particpiants home languages.</p>
<p>Finally, the distribution of birth dates:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">month_year =</span> <span class="fu">ym</span>(<span class="fu">str_sub</span>(dob, <span class="at">start =</span> <span class="dv">1</span>L, <span class="at">end =</span> <span class="sc">-</span><span class="dv">4</span>L))</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> month_year</span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Participants by date of birth"</span>, <span class="at">x =</span> <span class="st">"Birth date"</span>) <span class="sc">+</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>)</span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-participant-birthdays" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-participant-birthdays-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-participant-birthdays-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-328" title="Figure&nbsp;22: Participants by date of birth."><img src="SM1_formants_files/figure-html/fig-participant-birthdays-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-participant-birthdays-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22: Participants by date of birth.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="centre-level-summary" class="level2 page-columns page-full" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="centre-level-summary"><span class="header-section-number">6.3</span> Centre Level Summary</h2>
<p>How is our data distributed across centres?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>centres_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(transcript_centre) <span class="sc">%&gt;%</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tokens=</span><span class="fu">n</span>(), <span class="at">participants =</span> <span class="fu">n_distinct</span>(participant)) <span class="sc">%&gt;%</span> </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(participants))</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>centres_data <span class="sc">%&gt;%</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">transcript_centre</th>
<th style="text-align: right;">tokens</th>
<th style="text-align: right;">participants</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SOU</td>
<td style="text-align: right;">1300</td>
<td style="text-align: right;">21</td>
</tr>
<tr class="even">
<td style="text-align: left;">WES</td>
<td style="text-align: right;">1134</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAW</td>
<td style="text-align: right;">1065</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">KEN</td>
<td style="text-align: right;">957</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AVO</td>
<td style="text-align: right;">717</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAT</td>
<td style="text-align: right;">748</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAR</td>
<td style="text-align: right;">932</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">LYT</td>
<td style="text-align: right;">567</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RUT</td>
<td style="text-align: right;">454</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAI</td>
<td style="text-align: right;">137</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRE</td>
<td style="text-align: right;">199</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">BUS</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOR</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">ILA</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEI</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOR</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KIN</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">SUM</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We have 4 centres with 10 or more participants and 18 centres overall.</p>
<p>We can depict this:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>centres_data <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> transcript_centre,</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> tokens</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Centre"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-centres-token" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-centres-token-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-centres-token-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-329" title="Figure&nbsp;23: Centres by token."><img src="SM1_formants_files/figure-html/fig-centres-token-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-centres-token-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;23: Centres by token.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>centres_data <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> transcript_centre,</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> participants</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Centre"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-centres-participant" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-centres-participant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-centres-participant-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-330" title="Figure&nbsp;24: Centres by participants."><img src="SM1_formants_files/figure-html/fig-centres-participant-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-centres-participant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;24: Centres by participants.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="tables" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="tables"><span class="header-section-number">6.4</span> Tables</h2>
<p>How many tokens are stopwords or unstressed?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stopword) <span class="sc">%&gt;%</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">stopword</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4204</td>
</tr>
<tr class="even">
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">4548</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Unstressed?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stressed) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">stressed</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">1153</td>
</tr>
<tr class="even">
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">7599</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>What range of ethnicity identifications?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ethnicity) <span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">ethnicity</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Asian</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Māori</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NZ European</td>
<td style="text-align: right;">101</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pasifika</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>When were the participants born?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>participants_data <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dob) <span class="sc">%&gt;%</span> </span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ymd</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Min.      1st Qu.       Median         Mean      3rd Qu.         Max. 
"2015-01-11" "2016-03-16" "2016-09-25" "2016-08-17" "2017-01-01" "2017-07-06" </code></pre>
</div>
</div>
<p>What about the distribution of ages at collection point?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>pc_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant, collect) <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">first</span>(gender),</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ethnicity =</span> <span class="fu">first</span>(ethnicity),</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">home_language =</span> <span class="fu">first</span>(home_language),</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dob =</span> <span class="fu">first</span>(dob),</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">first</span>(age)</span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>pc_data <span class="sc">%&gt;%</span> </span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  47.00   50.00   54.00   53.88   57.00   65.00 </code></pre>
</div>
</div>
<section id="data-density" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="data-density"><span class="header-section-number">6.4.1</span> Data density</h3>
<p>In the paper, we make claims about the difference in the ‘density’ of the transcripts. i.e., we talk about the difference in the number of tokens-per-minute in adult speech (in this case, QuakeBox data shared via the <code>nzilbb.labbcat</code> function) and child speech.</p>
<p>First, what is the range of tokens-per-minute in the (adult) QuakeBox corpus?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>qb_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    speaker</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">max</span>(time) <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">tokens =</span> <span class="fu">n</span>()</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">tokens_per_minute =</span> tokens <span class="sc">/</span> duration</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(tokens_per_minute) <span class="sc">%&gt;%</span> </span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  14.02   30.95   33.79   34.20   37.32   51.12 </code></pre>
</div>
</div>
<p>What is the range of tokens per minute in our preschool corpus?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    participant, collect</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">max</span>(start) <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">tokens =</span> <span class="fu">n</span>(),</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"keep"</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tokens_per_minute =</span> tokens <span class="sc">/</span> duration</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(tokens_per_minute) <span class="sc">%&gt;%</span> </span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.928  12.011  21.792  23.524  33.050  85.355 </code></pre>
</div>
</div>
</section>
</section>
<section id="filtering-flow-chart" class="level2 page-columns page-full" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="filtering-flow-chart"><span class="header-section-number">6.5</span> Filtering Flow Chart</h2>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Flow chart generated using the DiagrammeR package.</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>flow_chart <span class="ot">&lt;-</span> <span class="fu">mermaid</span>(</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">diagram =</span> <span class="fu">glue</span>(<span class="st">"</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="st">  graph TB</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="st">  A(Extract data from LaBB-CAT: {initial_count} tokens) --&gt; </span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="st">  B(Home language: {language_count} tokens)</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="st">  B --&gt; C(FOOT, SCHWA and HANA: {word_count} tokens)</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="st">  C --&gt; D(Hesitations, and missing words: {na_word_count} tokens)</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="st">  D --&gt; E(Preceeding liquids: {liquid_count} tokens)</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="st">  E --&gt; F(FastTrack errors: {na_count} tokens)</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="st">  F --&gt; Q(Noisy tokens: {noise_count} tokens)</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="st">  Q --&gt; M(Long tokens: {length_count} tokens)</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="st">  M --&gt; G(F1: high bandwidth: {f1_band_count} tokens)</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="st">  M --&gt; H(F2: high bandwidth: {f2_band_count} tokens)</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a><span class="st">  G --&gt; I(F1: SD filter: {f1_sd_count} tokens)</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a><span class="st">  H --&gt; J(F2: SD filter: {f2_sd_count} tokens)</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a><span class="st">  I --&gt; K(F1: extremes: {f1_extreme_count} tokens)</span></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="st">  J --&gt; L(F2: extremes: {f2_extreme_count} tokens)</span></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span>),</span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">800</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a>flow_chart</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="fig-filtering-flow" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-filtering-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div id="htmlwidget-c7bde44826f504a6c39b" style="width:100%;height:780px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-c7bde44826f504a6c39b">{"x":{"diagram":"graph TB\n\nA(Extract data from LaBB-CAT: 16045 tokens) --> \nB(Home language: 15196 tokens)\nB --> C(FOOT, SCHWA and HANA: 11841 tokens)\nC --> D(Hesitations, and missing words: 11827 tokens)\nD --> E(Preceeding liquids: 11100 tokens)\nE --> F(FastTrack errors: 9285 tokens)\nF --> Q(Noisy tokens: 9162 tokens)\nQ --> M(Long tokens: 8943 tokens)\nM --> G(F1: high bandwidth: 8245 tokens)\nM --> H(F2: high bandwidth: 8245 tokens)\nG --> I(F1: SD filter: 7799 tokens)\nH --> J(F2: SD filter: 7735 tokens)\nI --> K(F1: extremes: 7266 tokens)\nJ --> L(F2: extremes: 7202 tokens)"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-filtering-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25: Data filtering flow chart.
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="normalisation" class="level1 page-columns page-full" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Normalisation</h1>
<p>We investigated multiple normalisation methods. The two used in the paper are Lobanov 2.0 on the full vowel space <em>with imputation</em> and Lobanov 2.0 on a subset of the data which allowed normalisation <em>without imputation</em>.</p>
<p>We also investigated the use of two log-mean approaches. We do not use these in the paper, but add them to these supplementary materials as they may be useful for other researchers.</p>
<section id="lobanov-2.0-top-5-vowels" class="level2 page-columns page-full" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="lobanov-2.0-top-5-vowels"><span class="header-section-number">7.1</span> Lobanov 2.0 (top 5 vowels)</h2>
<p>Lobanov 2.0 requires us to estimate means for each vowel type and a standard deviation. In Brand et al.&nbsp;2021, 5 tokens per category are required. We don’t have sufficient data for that for most speakers.</p>
<p>The following function calculates the data loss associated with different filtering strategies for applying Lobanov 2.0. We take then top <span class="math inline">\(n\)</span> vowel types by frequency and work out how much data remains. We require at least 3 tokens for each vowel type.</p>
<p>Note that this filtering takes place at the level of data <em>collections</em>. That is, we filter out a data collection point if it does not have enough data. This is because we have to normalise data collection points separately.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>lob_counts <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">vowel_types =</span> <span class="fu">seq</span>(<span class="dv">11</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>get_lob_count <span class="ot">&lt;-</span> <span class="cf">function</span>(vowel_types, in_data) {</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  in_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">pc =</span> <span class="fu">paste0</span>(participant, <span class="st">'-'</span>, collect)</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>  type_counts <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>  top_n_vowels <span class="ot">&lt;-</span> type_counts <span class="sc">%&gt;%</span> </span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n=</span>vowel_types) <span class="sc">%&gt;%</span> </span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(vowel)</span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>  pcs_to_filter <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(vowel <span class="sc">%in%</span> top_n_vowels) <span class="sc">%&gt;%</span> </span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">vowel =</span> <span class="fu">droplevels</span>(vowel)) <span class="sc">%&gt;%</span> </span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(pc, vowel, <span class="at">.drop=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">type_count =</span> <span class="fu">n</span>(),</span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop_last"</span></span>
<span id="cb121-27"><a href="#cb121-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-28"><a href="#cb121-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb121-29"><a href="#cb121-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(pc) <span class="sc">%&gt;%</span> </span>
<span id="cb121-30"><a href="#cb121-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb121-31"><a href="#cb121-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">min_count =</span> <span class="fu">min</span>(type_count)</span>
<span id="cb121-32"><a href="#cb121-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-33"><a href="#cb121-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb121-34"><a href="#cb121-34" aria-hidden="true" tabindex="-1"></a>      min_count <span class="sc">&lt;</span> <span class="dv">3</span></span>
<span id="cb121-35"><a href="#cb121-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-36"><a href="#cb121-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(pc) <span class="sc">%&gt;%</span> </span>
<span id="cb121-37"><a href="#cb121-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb121-38"><a href="#cb121-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-39"><a href="#cb121-39" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span></span>
<span id="cb121-40"><a href="#cb121-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb121-41"><a href="#cb121-41" aria-hidden="true" tabindex="-1"></a>      vowel <span class="sc">%in%</span> top_n_vowels,</span>
<span id="cb121-42"><a href="#cb121-42" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>pc <span class="sc">%in%</span> pcs_to_filter</span>
<span id="cb121-43"><a href="#cb121-43" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-44"><a href="#cb121-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>pc)</span>
<span id="cb121-45"><a href="#cb121-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-46"><a href="#cb121-46" aria-hidden="true" tabindex="-1"></a>  speaker_count <span class="ot">=</span> <span class="fu">length</span>(<span class="fu">unique</span>(filtered_data<span class="sc">$</span>participant))</span>
<span id="cb121-47"><a href="#cb121-47" aria-hidden="true" tabindex="-1"></a>  token_count <span class="ot">=</span> <span class="fu">nrow</span>(filtered_data)</span>
<span id="cb121-48"><a href="#cb121-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-49"><a href="#cb121-49" aria-hidden="true" tabindex="-1"></a>  out_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">speakers =</span> speaker_count, <span class="at">tokens =</span> token_count)</span>
<span id="cb121-50"><a href="#cb121-50" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb121-51"><a href="#cb121-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-52"><a href="#cb121-52" aria-hidden="true" tabindex="-1"></a>lob_counts <span class="ot">&lt;-</span> lob_counts <span class="sc">%&gt;%</span> </span>
<span id="cb121-53"><a href="#cb121-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb121-54"><a href="#cb121-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">counts =</span> <span class="fu">map</span>(vowel_types, <span class="sc">~</span> <span class="fu">get_lob_count</span>(.x, vowels))</span>
<span id="cb121-55"><a href="#cb121-55" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-56"><a href="#cb121-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(counts)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The results can be visualised in two ways. First, how many speakers are left?</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>lob_counts <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> vowel_types,</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> speakers</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Speakers with sufficient data for Lobanov 2.0"</span>,</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Speakers"</span>,</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Top n vowel types"</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-remaining-speakers" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-remaining-speakers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-remaining-speakers-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-331" title="Figure&nbsp;26: Speakers remaining in data set as we increase the number of included vowel types."><img src="SM1_formants_files/figure-html/fig-remaining-speakers-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-remaining-speakers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26: Speakers remaining in data set as we increase the number of included vowel types.
</figcaption>
</figure>
</div>
</div>
</div>
<p>We see from <a href="#fig-remaining-speakers" class="quarto-xref">Figure&nbsp;26</a> that if we insisted on 11 vowels we would have 1 speaker remaining.</p>
<p>Second, we quantify the <em>tokens</em> remaining if we insist on different numbers of vowel types.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>lob_counts <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> vowel_types,</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> tokens</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Token counts for Lobanov 2.0 with top-n vowels"</span>,</span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Top n vowels"</span>,</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Tokens"</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-remaining-tokens" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-remaining-tokens-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-remaining-tokens-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-332" title="Figure&nbsp;27: Vowel tokens remaining in data set as we increase the number of included vowel types."><img src="SM1_formants_files/figure-html/fig-remaining-tokens-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-remaining-tokens-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;27: Vowel tokens remaining in data set as we increase the number of included vowel types.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Tokens are maximised if we only take the <em>five</em> most frequent vowel types! In that case, we would be down to sixty-one speakers and 1000 tokens. The five types are <span class="smallcaps">kit</span>, <span class="smallcaps">fleece</span>, <span class="smallcaps">strut</span>, <span class="smallcaps">dress</span>, and <span class="smallcaps">trap</span>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">vowel</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">KIT</td>
<td style="text-align: right;">1945</td>
</tr>
<tr class="even">
<td style="text-align: left;">FLEECE</td>
<td style="text-align: right;">1202</td>
</tr>
<tr class="odd">
<td style="text-align: left;">STRUT</td>
<td style="text-align: right;">1033</td>
</tr>
<tr class="even">
<td style="text-align: left;">DRESS</td>
<td style="text-align: right;">1015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRAP</td>
<td style="text-align: right;">996</td>
</tr>
<tr class="even">
<td style="text-align: left;">LOT</td>
<td style="text-align: right;">762</td>
</tr>
<tr class="odd">
<td style="text-align: left;">START</td>
<td style="text-align: right;">614</td>
</tr>
<tr class="even">
<td style="text-align: left;">GOOSE</td>
<td style="text-align: right;">483</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NURSE</td>
<td style="text-align: right;">463</td>
</tr>
<tr class="even">
<td style="text-align: left;">THOUGHT</td>
<td style="text-align: right;">239</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We will make a subset of the data and apply Lobanov 2.0 normalisation to it in the usual fashion. This will be used later as a check to ensure we are not being led astray by the imputation approach we will use for the main analysis.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 'pc' is short for 'participant_collect'. We want to control for growth, so</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="co"># we're normalising separately for each collection point.</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>pcs_to_filter <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'KIT'</span>, <span class="st">'STRUT'</span>, <span class="st">'DRESS'</span>, <span class="st">'FLEECE'</span>, <span class="st">'TRAP'</span>)</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">droplevels</span>(vowel),</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">paste0</span>(participant, <span class="st">'-'</span>, collect)</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pc, vowel, <span class="at">.drop=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_count =</span> <span class="fu">n</span>()</span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pc) <span class="sc">%&gt;%</span> </span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_count =</span> <span class="fu">min</span>(type_count)</span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a>    min_count <span class="sc">&lt;</span> <span class="dv">3</span></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb125-23"><a href="#cb125-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(pc) <span class="sc">%&gt;%</span> </span>
<span id="cb125-24"><a href="#cb125-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb125-25"><a href="#cb125-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb125-26"><a href="#cb125-26" aria-hidden="true" tabindex="-1"></a>lob2_sub_vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span>   </span>
<span id="cb125-27"><a href="#cb125-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb125-28"><a href="#cb125-28" aria-hidden="true" tabindex="-1"></a>    vowel <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'KIT'</span>, <span class="st">'STRUT'</span>, <span class="st">'DRESS'</span>, <span class="st">'FLEECE'</span>, <span class="st">'TRAP'</span>)</span>
<span id="cb125-29"><a href="#cb125-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-30"><a href="#cb125-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-31"><a href="#cb125-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel =</span> <span class="fu">droplevels</span>(vowel),</span>
<span id="cb125-32"><a href="#cb125-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">paste0</span>(participant, <span class="st">'-'</span>, collect)   </span>
<span id="cb125-33"><a href="#cb125-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb125-34"><a href="#cb125-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>pc <span class="sc">%in%</span> pcs_to_filter) <span class="sc">%&gt;%</span> </span>
<span id="cb125-35"><a href="#cb125-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb125-36"><a href="#cb125-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(participant, vowel, F1_50, F2_50) <span class="sc">%&gt;%</span> </span>
<span id="cb125-37"><a href="#cb125-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lobanov_2</span>()  </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We visualise the subset.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>lob2_sub_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_lob2, F2_lob2</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only=</span><span class="cn">FALSE</span>, </span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">facet=</span><span class="cn">FALSE</span>, </span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ellipse=</span><span class="cn">TRUE</span>, </span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_alpha=</span><span class="fl">0.1</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-lob2-sub-vowels" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-lob2-sub-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-lob2-sub-vowels-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-333" title="Figure&nbsp;28: Lobanov 2.0 vowels (top-5 vowel types)."><img src="SM1_formants_files/figure-html/fig-lob2-sub-vowels-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-lob2-sub-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;28: Lobanov 2.0 vowels (top-5 vowel types).
</figcaption>
</figure>
</div>
</div>
</div>
<p>We have some extreme values normalised values here. This is unsurprising given we are taking means across a low number of tokens.</p>
</section>
<section id="single-parameter-log-mean-normalisation" class="level2 page-columns page-full" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="single-parameter-log-mean-normalisation"><span class="header-section-number">7.2</span> Single-parameter log-mean normalisation</h2>
<p>A nice normalisation method in cases of missing data is the regression approach outlined by <span class="citation" data-cites="barreda2018regression">(<a href="#ref-barreda2018regression" role="doc-biblioref">Barreda and Nearey 2018</a>)</span>.</p>
<p>We implement it here:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume that data has F1 and F2 as separate columns.  (i.e. in the wider form)</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>logmean_regression <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data) {</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  regression_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(participant, vowel, F1_50, F2_50) <span class="sc">%&gt;%</span> </span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">'F1_50'</span>, <span class="st">'F2_50'</span>), </span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">"formant"</span>, </span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to=</span><span class="st">"value"</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">vowel_formant =</span> <span class="fu">as.factor</span>(<span class="fu">paste0</span>(vowel, <span class="st">'_'</span>, formant)),</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">participant =</span> <span class="fu">as.factor</span>(participant),</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">log_value =</span> <span class="fu">log</span>(value)</span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>  regression_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a>    log_value <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> participant <span class="sc">+</span> vowel_formant, </span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> regression_data,</span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">vowel_formant =</span> contr.sum)</span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a>  norm_values <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(</span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dummy.coef</span>(regression_model)<span class="sc">$</span>participant, </span>
<span id="cb127-24"><a href="#cb127-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="st">"participant"</span></span>
<span id="cb127-25"><a href="#cb127-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-26"><a href="#cb127-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-27"><a href="#cb127-27" aria-hidden="true" tabindex="-1"></a>  normalised_data <span class="ot">&lt;-</span> regression_data <span class="sc">%&gt;%</span> </span>
<span id="cb127-28"><a href="#cb127-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(norm_values <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">speaker_value =</span> value)) <span class="sc">%&gt;%</span> </span>
<span id="cb127-29"><a href="#cb127-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb127-30"><a href="#cb127-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">norm_value =</span> log_value <span class="sc">-</span> speaker_value</span>
<span id="cb127-31"><a href="#cb127-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb127-32"><a href="#cb127-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(participant, norm_value, formant, vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb127-33"><a href="#cb127-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb127-34"><a href="#cb127-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">id =</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>, (<span class="fu">nrow</span>(regression_data)<span class="sc">/</span><span class="dv">2</span>)), <span class="at">each=</span><span class="dv">2</span>)</span>
<span id="cb127-35"><a href="#cb127-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb127-36"><a href="#cb127-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb127-37"><a href="#cb127-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_from =</span> formant,</span>
<span id="cb127-38"><a href="#cb127-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">"norm_value"</span>)</span>
<span id="cb127-39"><a href="#cb127-39" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">%&gt;%</span> </span>
<span id="cb127-40"><a href="#cb127-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb127-41"><a href="#cb127-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">F1_logmean =</span> F1_50,</span>
<span id="cb127-42"><a href="#cb127-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">F2_logmean =</span> F2_50</span>
<span id="cb127-43"><a href="#cb127-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb127-44"><a href="#cb127-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-45"><a href="#cb127-45" aria-hidden="true" tabindex="-1"></a>  out_data <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb127-46"><a href="#cb127-46" aria-hidden="true" tabindex="-1"></a>    in_data, </span>
<span id="cb127-47"><a href="#cb127-47" aria-hidden="true" tabindex="-1"></a>    normalised_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(F1_logmean, F2_logmean)</span>
<span id="cb127-48"><a href="#cb127-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-49"><a href="#cb127-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb127-50"><a href="#cb127-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-51"><a href="#cb127-51" aria-hidden="true" tabindex="-1"></a><span class="co"># This code makes the 'participant' column distinguish between recording</span></span>
<span id="cb127-52"><a href="#cb127-52" aria-hidden="true" tabindex="-1"></a><span class="co"># sessions (i.e., each recording session is normalised separately).</span></span>
<span id="cb127-53"><a href="#cb127-53" aria-hidden="true" tabindex="-1"></a>logmean_vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb127-54"><a href="#cb127-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb127-55"><a href="#cb127-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant_original =</span> participant,</span>
<span id="cb127-56"><a href="#cb127-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant =</span> <span class="fu">paste0</span>(participant, <span class="st">'_'</span>, collect)</span>
<span id="cb127-57"><a href="#cb127-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb127-58"><a href="#cb127-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">logmean_regression</span>()</span>
<span id="cb127-59"><a href="#cb127-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-60"><a href="#cb127-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Single value log-mean normalisation relies on a single value to scale</span></span>
<span id="cb127-61"><a href="#cb127-61" aria-hidden="true" tabindex="-1"></a><span class="co"># formants for each speaker. This is, roughly speaking, a way of capturing</span></span>
<span id="cb127-62"><a href="#cb127-62" aria-hidden="true" tabindex="-1"></a><span class="co"># vocal tract length difference.</span></span>
<span id="cb127-63"><a href="#cb127-63" aria-hidden="true" tabindex="-1"></a>speaker_values <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data) {</span>
<span id="cb127-64"><a href="#cb127-64" aria-hidden="true" tabindex="-1"></a>  regression_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb127-65"><a href="#cb127-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(participant, vowel, F1_50, F2_50) <span class="sc">%&gt;%</span> </span>
<span id="cb127-66"><a href="#cb127-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb127-67"><a href="#cb127-67" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">'F1_50'</span>, <span class="st">'F2_50'</span>), </span>
<span id="cb127-68"><a href="#cb127-68" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">"formant"</span>, </span>
<span id="cb127-69"><a href="#cb127-69" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to=</span><span class="st">"value"</span></span>
<span id="cb127-70"><a href="#cb127-70" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb127-71"><a href="#cb127-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb127-72"><a href="#cb127-72" aria-hidden="true" tabindex="-1"></a>      <span class="at">vowel_formant =</span> <span class="fu">as.factor</span>(<span class="fu">paste0</span>(vowel, <span class="st">'_'</span>, formant)),</span>
<span id="cb127-73"><a href="#cb127-73" aria-hidden="true" tabindex="-1"></a>      <span class="at">participant =</span> <span class="fu">as.factor</span>(participant),</span>
<span id="cb127-74"><a href="#cb127-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">log_value =</span> <span class="fu">log</span>(value)</span>
<span id="cb127-75"><a href="#cb127-75" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb127-76"><a href="#cb127-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-77"><a href="#cb127-77" aria-hidden="true" tabindex="-1"></a>  regression_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb127-78"><a href="#cb127-78" aria-hidden="true" tabindex="-1"></a>    log_value <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> participant <span class="sc">+</span> vowel_formant, </span>
<span id="cb127-79"><a href="#cb127-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> regression_data,</span>
<span id="cb127-80"><a href="#cb127-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">vowel_formant =</span> contr.sum)</span>
<span id="cb127-81"><a href="#cb127-81" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-82"><a href="#cb127-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb127-83"><a href="#cb127-83" aria-hidden="true" tabindex="-1"></a>  norm_values <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(</span>
<span id="cb127-84"><a href="#cb127-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dummy.coef</span>(regression_model)<span class="sc">$</span>participant, </span>
<span id="cb127-85"><a href="#cb127-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="st">"participant"</span></span>
<span id="cb127-86"><a href="#cb127-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-87"><a href="#cb127-87" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb127-88"><a href="#cb127-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-89"><a href="#cb127-89" aria-hidden="true" tabindex="-1"></a>speaks <span class="ot">&lt;-</span> <span class="fu">speaker_values</span>(vowels)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can look at the distribution of ‘speaker values’. These are the values which are used to scale each speakers vowel space. The underlying idea of this method of normalisation is that, as a model of perception, it is plausible that we normalise by estimating a single scaling factor for each speaker.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>speak_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant) <span class="sc">%&gt;%</span> </span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">first</span>(age)</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(speaks)</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>speak_data <span class="sc">%&gt;%</span> </span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> n,</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> value,</span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> age</span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-scaling-values" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-scaling-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-scaling-values-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-334" title="Figure&nbsp;29: Values by which speakers are scaled in single-parameter log-mean normalisation. The x axis depicts the number of tokens for each speaker, and shows a tightening of variation in the scaling factors as token counts increase."><img src="SM1_formants_files/figure-html/fig-scaling-values-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-scaling-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;29: Values by which speakers are scaled in single-parameter log-mean normalisation. The x axis depicts the number of tokens for each speaker, and shows a tightening of variation in the scaling factors as token counts increase.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Stability seems to increase with data here. This leads to a worry that we don’t even have enough data for this low-data approach! However, given there is only a handful of 200+ token speakers, it might just be chance that all have values around <span class="math inline">\(7.1\)</span>.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>logmean_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_logmean, F2_logmean</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ellipses =</span> <span class="cn">TRUE</span>,</span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">facet =</span> <span class="cn">FALSE</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-logmean-vowels" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-logmean-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-logmean-vowels-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-335" title="Figure&nbsp;30: Single-parameter log-mean vowel space."><img src="SM1_formants_files/figure-html/fig-logmean-vowels-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-logmean-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;30: Single-parameter log-mean vowel space.
</figcaption>
</figure>
</div>
</div>
</div>
<p>A bigger concern: we know that there are features of children and adult production that are likely to affect one formant more than the other. Single value normalisation is designed to avoid normalising such features! So we explore Lobanov 2.0 with imputed values and two-parameter log-mean normalisation.</p>
</section>
<section id="two-parameter-log-mean" class="level2 page-columns page-full" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="two-parameter-log-mean"><span class="header-section-number">7.3</span> Two-parameter log-mean</h2>
<p>We do the same as the above, but treat F1 and F2 individually.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume that data has F1 and F2 as separate columns.  (i.e. in the wider form)</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>dual_logmean_regression <span class="ot">&lt;-</span> <span class="cf">function</span>(in_data) {</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  regression_data <span class="ot">&lt;-</span> in_data <span class="sc">%&gt;%</span> </span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(participant, vowel, F1_50, F2_50) <span class="sc">%&gt;%</span> </span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">'F1_50'</span>, <span class="st">'F2_50'</span>), </span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">"formant"</span>, </span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to=</span><span class="st">"value"</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">participant =</span> <span class="fu">as.factor</span>(participant),</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">log_value =</span> <span class="fu">log</span>(value)</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>  speaker_values <span class="ot">&lt;-</span> regression_data <span class="sc">%&gt;%</span> </span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(formant) <span class="sc">%&gt;%</span> </span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">lm_fit =</span> <span class="fu">map</span>(</span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a>        data, </span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> <span class="fu">lm</span>(</span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a>          log_value <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> participant <span class="sc">+</span> vowel,</span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> .x,</span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">vowel =</span> contr.sum)</span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">norm_values =</span> <span class="fu">map</span>(</span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a>        lm_fit,</span>
<span id="cb130-30"><a href="#cb130-30" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> <span class="fu">as_tibble</span>(</span>
<span id="cb130-31"><a href="#cb130-31" aria-hidden="true" tabindex="-1"></a>          <span class="fu">dummy.coef</span>(.x)<span class="sc">$</span>participant,</span>
<span id="cb130-32"><a href="#cb130-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="st">"participant"</span></span>
<span id="cb130-33"><a href="#cb130-33" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb130-34"><a href="#cb130-34" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb130-35"><a href="#cb130-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-36"><a href="#cb130-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(formant, norm_values) <span class="sc">%&gt;%</span> </span>
<span id="cb130-37"><a href="#cb130-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(norm_values)</span>
<span id="cb130-38"><a href="#cb130-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb130-39"><a href="#cb130-39" aria-hidden="true" tabindex="-1"></a>  normalised_data <span class="ot">&lt;-</span> regression_data <span class="sc">%&gt;%</span> </span>
<span id="cb130-40"><a href="#cb130-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(speaker_values <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">speaker_value =</span> value)) <span class="sc">%&gt;%</span> </span>
<span id="cb130-41"><a href="#cb130-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb130-42"><a href="#cb130-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">norm_value =</span> log_value <span class="sc">-</span> speaker_value</span>
<span id="cb130-43"><a href="#cb130-43" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-44"><a href="#cb130-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(participant, norm_value, formant, vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb130-45"><a href="#cb130-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb130-46"><a href="#cb130-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">id =</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>, (<span class="fu">nrow</span>(regression_data)<span class="sc">/</span><span class="dv">2</span>)), <span class="at">each=</span><span class="dv">2</span>)</span>
<span id="cb130-47"><a href="#cb130-47" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-48"><a href="#cb130-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb130-49"><a href="#cb130-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_from =</span> formant,</span>
<span id="cb130-50"><a href="#cb130-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">"norm_value"</span>)</span>
<span id="cb130-51"><a href="#cb130-51" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">%&gt;%</span> </span>
<span id="cb130-52"><a href="#cb130-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb130-53"><a href="#cb130-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">F1_logmean =</span> F1_50,</span>
<span id="cb130-54"><a href="#cb130-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">F2_logmean =</span> F2_50</span>
<span id="cb130-55"><a href="#cb130-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb130-56"><a href="#cb130-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb130-57"><a href="#cb130-57" aria-hidden="true" tabindex="-1"></a>  out_data <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb130-58"><a href="#cb130-58" aria-hidden="true" tabindex="-1"></a>    in_data, </span>
<span id="cb130-59"><a href="#cb130-59" aria-hidden="true" tabindex="-1"></a>    normalised_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(F1_logmean, F2_logmean)</span>
<span id="cb130-60"><a href="#cb130-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb130-61"><a href="#cb130-61" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-62"><a href="#cb130-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-63"><a href="#cb130-63" aria-hidden="true" tabindex="-1"></a>dual_logmean_vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb130-64"><a href="#cb130-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-65"><a href="#cb130-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant_original =</span> participant,</span>
<span id="cb130-66"><a href="#cb130-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant =</span> <span class="fu">paste0</span>(participant, <span class="st">'_'</span>, collect)</span>
<span id="cb130-67"><a href="#cb130-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-68"><a href="#cb130-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dual_logmean_regression</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s look:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>dual_logmean_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_logmean, F2_logmean</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ellipses =</span> <span class="cn">TRUE</span>,</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">facet =</span> <span class="cn">FALSE</span>,</span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_size =</span> <span class="dv">3</span>,</span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_alpha =</span> <span class="fl">0.05</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-logmean-2par-vowels" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-logmean-2par-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-logmean-2par-vowels-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-336" title="Figure&nbsp;31: Two-parameter log-mean vowel space."><img src="SM1_formants_files/figure-html/fig-logmean-2par-vowels-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-logmean-2par-vowels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;31: Two-parameter log-mean vowel space.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This may be of use to us as an alternative to imputation. Our next step is to modify Lobanov 2.0 by allowing imputation.</p>
</section>
<section id="sec-lob2" class="level2 page-columns page-full" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="sec-lob2"><span class="header-section-number">7.4</span> Lobanov with Imputation</h2>
<p>We can impute values before we normalise, as in Wilson Black et al.&nbsp;(2023). In that paper, imputation occurred within intervals of a speaker’s monologue. So we could impute the mean value <em>for the speaker as a whole</em> for a given vowel type. We have to think carefully about what the best value to impute for speakers in the absence of source from the same speaker and collection point. The basic principle is to avoid biasing the analysis towards positive results and to quantify what we have done and how many data points are affected by normalisation in order to qualify our later conclusions.</p>
<p>Do we need a minimum data amount in order to include a speaker? A sense of the distribution of token counts for each speaker and collection point will be useful here.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>vowels <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(participant, collect, vowel) <span class="sc">%&gt;%</span> </span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> n,</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> vowel</span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">stat=</span><span class="st">"density"</span>) <span class="sc">+</span></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> vowel_colours)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-token-per-vowel-pc" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-token-per-vowel-pc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-token-per-vowel-pc-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-337" title="Figure&nbsp;32: Distributions of token counts for each vowel type across participants and collection points."><img src="SM1_formants_files/figure-html/fig-token-per-vowel-pc-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-token-per-vowel-pc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;32: Distributions of token counts for each vowel type across participants and collection points.
</figcaption>
</figure>
</div>
</div>
</div>
<p>It’s really hard to decide on a cut off value here.</p>
<p>Consequently, we look the other way. That is, we impute for <em>everyone</em> then filter depending on how many data points we impute for a given speaker.</p>
<p>To start, we want counts for each participant, collect, vowel combination <em>including</em> missing vowels.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>pcv_counts <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(participant, collect, vowel, <span class="at">.drop =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>How many 0’s?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>token_counts <span class="ot">&lt;-</span> pcv_counts <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(n)</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>token_counts <span class="sc">%&gt;%</span> </span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tokens =</span> n,</span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Participant collection points</span><span class="st">`</span> <span class="ot">=</span> nn</span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Tokens</th>
<th style="text-align: right;">Participant collection points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">501</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">395</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">299</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">226</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">215</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">152</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">106</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">120</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: right;">9</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">47</td>
</tr>
<tr class="even">
<td style="text-align: right;">11</td>
<td style="text-align: right;">35</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="even">
<td style="text-align: right;">13</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: right;">15</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: right;">17</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">18</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: right;">19</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: right;">20</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">21</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: right;">22</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">23</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">24</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">29</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">31</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">38</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This is a lot of situations in which a speaker has no tokens of a given vowel at a collection point.</p>
<p>What percentage of data points am I proposing to impute if all vowels and collection points are topped up to 3 tokens?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>to_impute <span class="ot">=</span> <span class="fu">sum</span>(token_counts<span class="sc">$</span>nn[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])<span class="sc">/</span><span class="fu">nrow</span>(vowels) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>to_impute</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13.65402</code></pre>
</div>
</div>
<p>An additional 13.65%. However, it is worth noting that these imputed values will not be present in the resulting dataset (because they are deleted after normalisation). That is, they are used to normalise the actual readings, rather than to generate new readings.</p>
<p>In any case, we have an answer to <em>when</em> to impute: if the number of tokens of a given vowel for a participant collection point is fewer than 3.</p>
<p>But <em>what</em> will we impute? Here, one obvious answer is a mean value from children sufficiently close in age at a given collection point. What is sufficiently close? We initially tried to take those children born within 3 months (i.e.&nbsp;their age in months and one months either side) of the child we are normalising. However, we found this to be quite unstable. Instead, we impute from linear models for each vowel-formant pair, with age and gender (not in interaction) as our predictors.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>vowel_models <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">contains</span>(<span class="st">'_50'</span>),</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"formant"</span>,</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"formant_value"</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vowel, formant) <span class="sc">%&gt;%</span> </span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">lm_fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(formant_value <span class="sc">~</span> age <span class="sc">+</span> gender, <span class="at">data=</span>.x))</span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>What do these models look like? Let’s get predictions for each age and gender.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(vowels<span class="sc">$</span>age), <span class="fu">max</span>(vowels<span class="sc">$</span>age))</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>to_predict <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"F"</span>), <span class="at">each =</span> <span class="fu">length</span>(ages)),</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">rep</span>(ages, <span class="at">times =</span> <span class="dv">2</span>)</span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This function just adds the predictions to the tibble of the variables to be</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a><span class="co"># predicted</span></span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>get_predictions <span class="ot">&lt;-</span> <span class="cf">function</span>(model, to_predict) {</span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>  predictions <span class="ot">&lt;-</span> to_predict <span class="sc">%&gt;%</span> </span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">fit =</span> <span class="fu">predict</span>(model, <span class="at">newdata =</span> to_predict)</span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a>vowel_models <span class="ot">&lt;-</span> vowel_models <span class="sc">%&gt;%</span> </span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">predictions =</span> <span class="fu">map</span>(lm_fit, <span class="sc">~</span> <span class="fu">get_predictions</span>(.x, to_predict))</span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a>vowel_predictions <span class="ot">&lt;-</span> vowel_models <span class="sc">%&gt;%</span> </span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vowel, formant, predictions) <span class="sc">%&gt;%</span> </span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions)</span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a>vowel_predictions</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,140 × 5
# Groups:   vowel, formant [30]
   vowel formant gender   age   fit
   &lt;fct&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;
 1 TRAP  F1_50   M         47  849.
 2 TRAP  F1_50   M         48  844.
 3 TRAP  F1_50   M         49  838.
 4 TRAP  F1_50   M         50  833.
 5 TRAP  F1_50   M         51  828.
 6 TRAP  F1_50   M         52  822.
 7 TRAP  F1_50   M         53  817.
 8 TRAP  F1_50   M         54  812.
 9 TRAP  F1_50   M         55  806.
10 TRAP  F1_50   M         56  801.
# ℹ 1,130 more rows</code></pre>
</div>
</div>
<p>Let’s visualise (without any indication of error).</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>vowel_predictions <span class="sc">%&gt;%</span> </span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>formant <span class="sc">==</span> <span class="st">"F3_50"</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> age,</span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> fit,</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> vowel</span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> vowel_colours) <span class="sc">+</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(</span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">vars</span>(gender),</span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="fu">vars</span>(formant),</span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">scales =</span> <span class="st">"free"</span></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Imputation models"</span>,</span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age (months)"</span>,</span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted formant frequency"</span></span>
<span id="cb140-23"><a href="#cb140-23" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-imputation-models" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-imputation-models-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-imputation-models-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-338" title="Figure&nbsp;33: Models used to imputed values for normalisation."><img src="SM1_formants_files/figure-html/fig-imputation-models-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-imputation-models-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;33: Models used to imputed values for normalisation.
</figcaption>
</figure>
</div>
</div>
</div>
<p>We now have values for imputation. We could begin to peer at the results of these models now, but we will resist until later stages. There is not enough being controlled yet.</p>
<p>The next step is to get the additional rows of data we need for each speaker. We can then add these rows to their non-imputed data with <code>bind_rows()</code> and then apply the <code>lobanov_2()</code> function from the <code>nzilbb.vowels</code> package.</p>
<p><strong><em>NB:</em></strong> we can’t directly compare these values to the Lobanov 2.0 top-5-vowels results because the vowel inventory is different. If it were possible to compare the top-5 results with a full complement of vowels we wouldn’t have had to go through this whole imputation process.</p>
<p>It will be convenient to widen the predictions.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>vowel_predictions <span class="ot">&lt;-</span> vowel_predictions <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="st">'formant'</span>,</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="st">'fit'</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>get_additional_rows <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    speaker_data, </span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    vowel_predictions,</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cutoff =</span> <span class="dv">3</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>  ) {</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># assume speaker_data is for a single collection point, so there is one</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># age and gender.</span></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a>  age <span class="ot">&lt;-</span> speaker_data<span class="sc">$</span>age[[<span class="dv">1</span>]]</span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a>  gender <span class="ot">&lt;-</span> speaker_data<span class="sc">$</span>gender[[<span class="dv">1</span>]]</span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a>  filtered_predictions <span class="ot">&lt;-</span> vowel_predictions <span class="sc">%&gt;%</span> </span>
<span id="cb142-13"><a href="#cb142-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb142-14"><a href="#cb142-14" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">==</span> age,</span>
<span id="cb142-15"><a href="#cb142-15" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> gender</span>
<span id="cb142-16"><a href="#cb142-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb142-17"><a href="#cb142-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-18"><a href="#cb142-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the low-n rows</span></span>
<span id="cb142-19"><a href="#cb142-19" aria-hidden="true" tabindex="-1"></a>  to_impute <span class="ot">&lt;-</span> speaker_data <span class="sc">%&gt;%</span> </span>
<span id="cb142-20"><a href="#cb142-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vowel, <span class="at">.drop=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-21"><a href="#cb142-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb142-22"><a href="#cb142-22" aria-hidden="true" tabindex="-1"></a>    n <span class="sc">&lt;</span> cutoff</span>
<span id="cb142-23"><a href="#cb142-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb142-24"><a href="#cb142-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb142-25"><a href="#cb142-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generate new rows with imputed mean values to get up to 3 total for</span></span>
<span id="cb142-26"><a href="#cb142-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># each vowel type.</span></span>
<span id="cb142-27"><a href="#cb142-27" aria-hidden="true" tabindex="-1"></a>  out_data <span class="ot">&lt;-</span> to_impute <span class="sc">%&gt;%</span> </span>
<span id="cb142-28"><a href="#cb142-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb142-29"><a href="#cb142-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">additional_rows =</span> <span class="fu">map2</span>(</span>
<span id="cb142-30"><a href="#cb142-30" aria-hidden="true" tabindex="-1"></a>        vowel,</span>
<span id="cb142-31"><a href="#cb142-31" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">3</span><span class="sc">-</span>n),</span>
<span id="cb142-32"><a href="#cb142-32" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> <span class="fu">tibble</span>(</span>
<span id="cb142-33"><a href="#cb142-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">vowel =</span> <span class="fu">rep</span>(.x, .y),</span>
<span id="cb142-34"><a href="#cb142-34" aria-hidden="true" tabindex="-1"></a>          <span class="at">F1_50 =</span> <span class="fu">rep</span>(</span>
<span id="cb142-35"><a href="#cb142-35" aria-hidden="true" tabindex="-1"></a>            filtered_predictions <span class="sc">%&gt;%</span> </span>
<span id="cb142-36"><a href="#cb142-36" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(vowel <span class="sc">==</span> .x) <span class="sc">%&gt;%</span> </span>
<span id="cb142-37"><a href="#cb142-37" aria-hidden="true" tabindex="-1"></a>              <span class="fu">pull</span>(F1_50) <span class="sc">%&gt;%</span> </span>
<span id="cb142-38"><a href="#cb142-38" aria-hidden="true" tabindex="-1"></a>              <span class="fu">pluck</span>(<span class="dv">1</span>),</span>
<span id="cb142-39"><a href="#cb142-39" aria-hidden="true" tabindex="-1"></a>            .y</span>
<span id="cb142-40"><a href="#cb142-40" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb142-41"><a href="#cb142-41" aria-hidden="true" tabindex="-1"></a>          <span class="at">F2_50 =</span> <span class="fu">rep</span>(</span>
<span id="cb142-42"><a href="#cb142-42" aria-hidden="true" tabindex="-1"></a>            filtered_predictions <span class="sc">%&gt;%</span> </span>
<span id="cb142-43"><a href="#cb142-43" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(vowel <span class="sc">==</span> .x) <span class="sc">%&gt;%</span> </span>
<span id="cb142-44"><a href="#cb142-44" aria-hidden="true" tabindex="-1"></a>              <span class="fu">pull</span>(F2_50) <span class="sc">%&gt;%</span> </span>
<span id="cb142-45"><a href="#cb142-45" aria-hidden="true" tabindex="-1"></a>              <span class="fu">pluck</span>(<span class="dv">1</span>),</span>
<span id="cb142-46"><a href="#cb142-46" aria-hidden="true" tabindex="-1"></a>            .y</span>
<span id="cb142-47"><a href="#cb142-47" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb142-48"><a href="#cb142-48" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb142-49"><a href="#cb142-49" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb142-50"><a href="#cb142-50" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb142-51"><a href="#cb142-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(additional_rows) <span class="sc">%&gt;%</span> </span>
<span id="cb142-52"><a href="#cb142-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(additional_rows) <span class="sc">%&gt;%</span> </span>
<span id="cb142-53"><a href="#cb142-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use MatchId column to track which data points have been imputed</span></span>
<span id="cb142-54"><a href="#cb142-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb142-55"><a href="#cb142-55" aria-hidden="true" tabindex="-1"></a>      <span class="at">MatchId =</span> <span class="st">"Imputed"</span></span>
<span id="cb142-56"><a href="#cb142-56" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb142-57"><a href="#cb142-57" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s test the function on a particular speaker at a particular collection point.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>test_speaker_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># a random participant</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>    participant <span class="sc">==</span> vowels<span class="sc">$</span>participant[[</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">floor</span>(<span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="fu">nrow</span>(vowels)))</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>    ]]</span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure a single collect</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>test_speaker_data <span class="ot">&lt;-</span> test_speaker_data <span class="sc">%&gt;%</span> </span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>    collect <span class="sc">==</span> <span class="fu">first</span>(collect)</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> test_speaker_data<span class="sc">$</span>age[[<span class="dv">1</span>]]</span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> test_speaker_data<span class="sc">$</span>gender[[<span class="dv">1</span>]]</span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a>additional_rows <span class="ot">&lt;-</span> <span class="fu">get_additional_rows</span>(</span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true" tabindex="-1"></a>  test_speaker_data,</span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true" tabindex="-1"></a>  vowel_predictions</span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb143-22"><a href="#cb143-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-23"><a href="#cb143-23" aria-hidden="true" tabindex="-1"></a>test_speaker_data <span class="sc">%&gt;%</span> </span>
<span id="cb143-24"><a href="#cb143-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb143-25"><a href="#cb143-25" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_50, F2_50</span>
<span id="cb143-26"><a href="#cb143-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb143-27"><a href="#cb143-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb143-28"><a href="#cb143-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb143-29"><a href="#cb143-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_alpha =</span> <span class="dv">1</span></span>
<span id="cb143-30"><a href="#cb143-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb143-31"><a href="#cb143-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-32"><a href="#cb143-32" aria-hidden="true" tabindex="-1"></a>additional_rows <span class="sc">%&gt;%</span> </span>
<span id="cb143-33"><a href="#cb143-33" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="fig-test-speaker-1" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-test-speaker-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">vowel</th>
<th style="text-align: right;">F1_50</th>
<th style="text-align: right;">F2_50</th>
<th style="text-align: left;">MatchId</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">LOT</td>
<td style="text-align: right;">726.2119</td>
<td style="text-align: right;">1569.992</td>
<td style="text-align: left;">Imputed</td>
</tr>
<tr class="even">
<td style="text-align: left;">THOUGHT</td>
<td style="text-align: right;">620.2705</td>
<td style="text-align: right;">1194.669</td>
<td style="text-align: left;">Imputed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">THOUGHT</td>
<td style="text-align: right;">620.2705</td>
<td style="text-align: right;">1194.669</td>
<td style="text-align: left;">Imputed</td>
</tr>
<tr class="even">
<td style="text-align: left;">THOUGHT</td>
<td style="text-align: right;">620.2705</td>
<td style="text-align: right;">1194.669</td>
<td style="text-align: left;">Imputed</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-test-speaker-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34: Vowel space for a particular speaker at one collection point (no imputation).
</figcaption>
</figure>
</div>
<div class="cell-output-display page-columns page-full">
<div id="fig-test-speaker-2" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-test-speaker-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-test-speaker-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-339" title="Figure&nbsp;35: Vowel space for a particular speaker at one collection point (no imputation)."><img src="SM1_formants_files/figure-html/fig-test-speaker-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-test-speaker-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;35: Vowel space for a particular speaker at one collection point (no imputation).
</figcaption>
</figure>
</div>
</div>
</div>
<p>The values in the table are the four values which will be imputed for this speaker. The values are plausible. Rerunning the cell lets you look at multiple participant-collects and their vowel data. If there is no point in the plot, then there are three in the additional rows, etc.</p>
<p>We can now generate Lobanov 2.0 values for each speaker.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>lob2_imputed_values <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant, collect) <span class="sc">%&gt;%</span> </span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">additional_rows =</span> <span class="fu">map</span>(</span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a>      data,</span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">get_additional_rows</span>(</span>
<span id="cb144-9"><a href="#cb144-9" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb144-10"><a href="#cb144-10" aria-hidden="true" tabindex="-1"></a>        vowel_predictions</span>
<span id="cb144-11"><a href="#cb144-11" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb144-12"><a href="#cb144-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb144-13"><a href="#cb144-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">imputed_data =</span> <span class="fu">map2</span>(</span>
<span id="cb144-14"><a href="#cb144-14" aria-hidden="true" tabindex="-1"></a>      data,</span>
<span id="cb144-15"><a href="#cb144-15" aria-hidden="true" tabindex="-1"></a>      additional_rows,</span>
<span id="cb144-16"><a href="#cb144-16" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> .x <span class="sc">%&gt;%</span> </span>
<span id="cb144-17"><a href="#cb144-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(vowel, F1_50, F2_50, MatchId) <span class="sc">%&gt;%</span> </span>
<span id="cb144-18"><a href="#cb144-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">bind_rows</span>(.y)</span>
<span id="cb144-19"><a href="#cb144-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb144-20"><a href="#cb144-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb144-21"><a href="#cb144-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb144-22"><a href="#cb144-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb144-23"><a href="#cb144-23" aria-hidden="true" tabindex="-1"></a>    participant, collect, imputed_data</span>
<span id="cb144-24"><a href="#cb144-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb144-25"><a href="#cb144-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(imputed_data) <span class="sc">%&gt;%</span> </span>
<span id="cb144-26"><a href="#cb144-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb144-27"><a href="#cb144-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">paste0</span>(participant, <span class="st">'-'</span>, collect)</span>
<span id="cb144-28"><a href="#cb144-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb144-29"><a href="#cb144-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb144-30"><a href="#cb144-30" aria-hidden="true" tabindex="-1"></a>    pc, vowel, F1_50, F2_50</span>
<span id="cb144-31"><a href="#cb144-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb144-32"><a href="#cb144-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lobanov_2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We now join these with the original data by <code>MatchId</code> to remove the imputed data points. But first, we collect relevant counts of imputed values for each <code>pc</code> (i.e.&nbsp;each participant-collect combination).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Want to know if any pcs have _no_ imputation (unlikely)</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>pcs_with_data <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(participant, collect) <span class="sc">%&gt;%</span> </span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">str_c</span>(participant, collect, <span class="at">sep =</span> <span class="st">'-'</span>)</span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(pc) <span class="sc">%&gt;%</span> </span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>imputation_counts <span class="ot">&lt;-</span> lob2_imputed_values <span class="sc">%&gt;%</span> </span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant =</span> <span class="fu">as.factor</span>(participant),</span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">collect =</span> <span class="fu">as.factor</span>(collect)</span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true" tabindex="-1"></a>    MatchId <span class="sc">==</span> <span class="st">"Imputed"</span></span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(participant, collect, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb145-19"><a href="#cb145-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb145-20"><a href="#cb145-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_vowels =</span> <span class="fu">n_distinct</span>(vowel),</span>
<span id="cb145-21"><a href="#cb145-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_tokens =</span> <span class="fu">n</span>()</span>
<span id="cb145-22"><a href="#cb145-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb145-23"><a href="#cb145-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb145-24"><a href="#cb145-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">str_c</span>(participant, collect, <span class="at">sep =</span> <span class="st">'-'</span>)</span>
<span id="cb145-25"><a href="#cb145-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb145-26"><a href="#cb145-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb145-27"><a href="#cb145-27" aria-hidden="true" tabindex="-1"></a>    pc <span class="sc">%in%</span> pcs_with_data</span>
<span id="cb145-28"><a href="#cb145-28" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>How many imputed tokens? Let’s visualise.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>imputation_counts <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> n_tokens</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distributions of counts of tokens imputed"</span>,</span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Tokens imputed"</span>,</span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Collection points"</span></span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-dist-imputation" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-dist-imputation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-dist-imputation-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-340" title="Figure&nbsp;36: Distribution of counts of tokens imputed for each speaker."><img src="SM1_formants_files/figure-html/fig-dist-imputation-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-dist-imputation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;36: Distribution of counts of tokens imputed for each speaker.
</figcaption>
</figure>
</div>
</div>
</div>
<p>How many imputed vowel types?</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>imputation_counts <span class="sc">%&gt;%</span> </span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> n_vowels</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distributions of counts of vowel types imputed"</span>,</span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Vowel types imputed"</span>,</span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Collection points"</span></span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-dist-imputation-types" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-dist-imputation-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-dist-imputation-types-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-341" title="Figure&nbsp;37: Distribution of counts of vowel types imputed for each speaker."><img src="SM1_formants_files/figure-html/fig-dist-imputation-types-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-dist-imputation-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;37: Distribution of counts of vowel types imputed for each speaker.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This is a lot of imputation. In the absence of a clear cut off point, we remove any collection points in which there are more than 20 imputed tokens. This would imply only a single token in each category at a given collection point.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>to_remove <span class="ot">&lt;-</span> imputation_counts <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>    n_tokens <span class="sc">&gt;</span> <span class="dv">20</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">str_c</span>(participant, collect)</span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>lob2_imputed <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb148-10"><a href="#cb148-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb148-11"><a href="#cb148-11" aria-hidden="true" tabindex="-1"></a>    lob2_imputed_values <span class="sc">%&gt;%</span> </span>
<span id="cb148-12"><a href="#cb148-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(</span>
<span id="cb148-13"><a href="#cb148-13" aria-hidden="true" tabindex="-1"></a>        MatchId, F1_lob2, F2_lob2</span>
<span id="cb148-14"><a href="#cb148-14" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb148-15"><a href="#cb148-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-16"><a href="#cb148-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb148-17"><a href="#cb148-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">pc =</span> <span class="fu">str_c</span>(participant, collect)</span>
<span id="cb148-18"><a href="#cb148-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-19"><a href="#cb148-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb148-20"><a href="#cb148-20" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(pc <span class="sc">%in%</span> to_remove<span class="sc">$</span>pc)</span>
<span id="cb148-21"><a href="#cb148-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb148-22"><a href="#cb148-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pc)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We remove 35 recordings.</p>
<p>Let’s have a look at the resulting data set.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>lob2_imputed <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    participant, vowel, F1_lob2, F2_lob2</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_vowel_space</span>(</span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowel_colours =</span> vowel_colours,</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">means_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ellipses =</span> <span class="cn">TRUE</span>,</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">facet =</span> <span class="cn">FALSE</span>,</span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_alpha =</span> <span class="fl">0.05</span></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-lob2-vs" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-lob2-vs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-lob2-vs-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-342" title="Figure&nbsp;38: Tokens after Lobanov 2.0 normalisation with imputation."><img src="SM1_formants_files/figure-html/fig-lob2-vs-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-lob2-vs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;38: Tokens after Lobanov 2.0 normalisation with imputation.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="merge-and-export-data" class="level1 page-columns page-full" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Merge and Export Data</h1>
<p>We merge the data together so that all normalisation methods are within the same data frame.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>processed_vowels <span class="ot">&lt;-</span> vowels <span class="sc">%&gt;%</span> </span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>    lob2_imputed <span class="sc">%&gt;%</span> </span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(MatchId, F1_lob2, F2_lob2)</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>    lob2_sub_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(MatchId, F1_lob2, F2_lob2) <span class="sc">%&gt;%</span> </span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">F1_sub =</span> F1_lob2,</span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">F2_sub =</span> F2_lob2</span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb150-14"><a href="#cb150-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb150-15"><a href="#cb150-15" aria-hidden="true" tabindex="-1"></a>    logmean_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb150-16"><a href="#cb150-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(MatchId, F1_logmean, F2_logmean) <span class="sc">%&gt;%</span> </span>
<span id="cb150-17"><a href="#cb150-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb150-18"><a href="#cb150-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">F1_logmean1 =</span> F1_logmean,</span>
<span id="cb150-19"><a href="#cb150-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">F2_logmean1 =</span> F2_logmean</span>
<span id="cb150-20"><a href="#cb150-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb150-21"><a href="#cb150-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb150-22"><a href="#cb150-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb150-23"><a href="#cb150-23" aria-hidden="true" tabindex="-1"></a>    dual_logmean_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb150-24"><a href="#cb150-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(MatchId, F1_logmean, F2_logmean) <span class="sc">%&gt;%</span> </span>
<span id="cb150-25"><a href="#cb150-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb150-26"><a href="#cb150-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">F1_logmean2 =</span> F1_logmean,</span>
<span id="cb150-27"><a href="#cb150-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">F2_logmean2 =</span> F2_logmean</span>
<span id="cb150-28"><a href="#cb150-28" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb150-29"><a href="#cb150-29" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>One last check. Now that we have all the data together, we can see how closely correlated the results of the normalisation methods are.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>norm_values <span class="ot">&lt;-</span> processed_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>F1, <span class="sc">-</span>F2) <span class="sc">%&gt;%</span> </span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>    MatchId, <span class="fu">matches</span>(<span class="st">'F[1-2]'</span>), <span class="sc">-</span><span class="fu">matches</span>(<span class="st">'band'</span>), <span class="sc">-</span><span class="fu">matches</span>(<span class="st">'50'</span>), </span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">matches</span>(<span class="st">'outlier'</span>)</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">matches</span>(<span class="st">'MatchId'</span>),</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"norm_value"</span></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">formant =</span> <span class="fu">str_sub</span>(variable, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">norm =</span> <span class="fu">str_sub</span>(variable, <span class="dv">4</span>)</span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb151-16"><a href="#cb151-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>variable) <span class="sc">%&gt;%</span> </span>
<span id="cb151-17"><a href="#cb151-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb151-18"><a href="#cb151-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> norm,</span>
<span id="cb151-19"><a href="#cb151-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> norm_value</span>
<span id="cb151-20"><a href="#cb151-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>First, we look at correlations of the normalisation methods which apply to all of the data.</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>norm_values <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'sub'</span>), <span class="sc">-</span>MatchId, <span class="sc">-</span>formant</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use=</span><span class="st">"pairwise.complete.obs"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggcorrplot</span>(<span class="at">method =</span> <span class="st">"square"</span>, <span class="at">lab =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-norm-all" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-norm-all-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-norm-all-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-343" title="Figure&nbsp;39: Pairwise correlations of normalisation methods applied to the full data set."><img src="SM1_formants_files/figure-html/fig-norm-all-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-norm-all-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39: Pairwise correlations of normalisation methods applied to the full data set.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Now for the top five vowel types:</p>
<div class="cell page-columns page-full">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>norm_values <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>MatchId, <span class="sc">-</span>formant</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use=</span><span class="st">'complete.obs'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggcorrplot</span>(<span class="at">method =</span> <span class="st">"square"</span>, <span class="at">lab=</span><span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-norm-5" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-norm-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="SM1_formants_files/figure-html/fig-norm-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-344" title="Figure&nbsp;40: Pairwise correlations of normalisation methods applied to the top five vowel types only."><img src="SM1_formants_files/figure-html/fig-norm-5-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-norm-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;40: Pairwise correlations of normalisation methods applied to the top five vowel types only.
</figcaption>
</figure>
</div>
</div>
</div>
<p>It is to be expected that the formant intrinsic methods (Lobanov 2.0 and two parameter log-mean) are closely correlated with one another and not particularly strongly correlated with the (formant extrinsic) single-parameter log-mean method.</p>
<p>Table 3 of the paper require the post-normalisation count of vowels for Table 3. We output that here.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>processed_vowels <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(F1_lob2), <span class="sc">!</span><span class="fu">is.na</span>(F2_lob2)) <span class="sc">%&gt;%</span> </span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vowel)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   vowel       n
   &lt;fct&gt;   &lt;int&gt;
 1 DRESS     987
 2 FLEECE   1169
 3 GOOSE     470
 4 KIT      1893
 5 LOT       742
 6 TRAP      977
 7 START     602
 8 STRUT    1002
 9 THOUGHT   238
10 NURSE     450</code></pre>
</div>
</div>
<p>Finally, we export the data for modelling.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(processed_vowels, <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'processed_vowels.rds'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="references" class="level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div class="cell">
<div class="cell-output-display">

</div>
</div>
<div class="refs">

</div>

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-rmarkdown2024" class="csl-entry" role="listitem">
Allaire, JJ, Yihui Xie, Christophe Dervieux, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, et al. 2024. <em><span class="nocase">rmarkdown</span>: Dynamic Documents for r</em>. <a href="https://github.com/rstudio/rmarkdown">https://github.com/rstudio/rmarkdown</a>.
</div>
<div id="ref-marginaleffects" class="csl-entry" role="listitem">
Arel-Bundock, Vincent, Noah Greifer, and Andrew Heiss. 2024. <span>‘How to Interpret Statistical Models Using <span class="nocase">marginaleffects</span> for <span>R</span> and <span>Python</span>’</span>. <em>Journal of Statistical Software</em> 111 (9): 1–32. <a href="https://doi.org/10.18637/jss.v111.i09">https://doi.org/10.18637/jss.v111.i09</a>.
</div>
<div id="ref-barreda2021fast" class="csl-entry" role="listitem">
Barreda, Santiago. 2021. <span>‘Fast Track: Fast (Nearly) Automatic Formant-Tracking Using Praat’</span>. <em>Linguistics Vanguard</em> 7 (1). <a href="https://doi.org/10.1515/lingvan-2020-0051">https://doi.org/10.1515/lingvan-2020-0051</a>.
</div>
<div id="ref-barreda2018regression" class="csl-entry" role="listitem">
Barreda, Santiago, and Terrance M. Nearey. 2018. <span>‘<span class="nocase">A regression approach to vowel normalization for missing and unbalanced data</span>’</span>. <em>The Journal of the Acoustical Society of America</em> 144 (1): 500–520. <a href="https://doi.org/10.1121/1.5047742">https://doi.org/10.1121/1.5047742</a>.
</div>
<div id="ref-fasttrackr" class="csl-entry" role="listitem">
Barreda, Santiago, and Joey Stanley. 2025. <em><span class="nocase">fasttrackr</span>: Fast Track Integration in r</em>. <a href="https://github.com/santiagobarreda/FastTrackR">https://github.com/santiagobarreda/FastTrackR</a>.
</div>
<div id="ref-imager" class="csl-entry" role="listitem">
Barthelme, Simon. 2024. <em><span class="nocase">imager</span>: Image Processing Library Based on <span>‘<span>CImg</span>’</span></em>. <a href="https://CRAN.R-project.org/package=imager">https://CRAN.R-project.org/package=imager</a>.
</div>
<div id="ref-boersma2024praat" class="csl-entry" role="listitem">
Boersma, Paul, and David Weenink. 2024. <span>‘Praat: Doing Phonetics by Computer (Version 6.4.04)’</span>. <a href="http://www.praat.org/">http://www.praat.org/</a>.
</div>
<div id="ref-rPraat" class="csl-entry" role="listitem">
Bořil, Tomáš, and Radek Skarnitzl. 2016. <span>‘Tools rPraat and mPraat’</span>. In <em>Text, Speech, and Dialogue: 19th International Conference, TSD 2016, Brno, Czech Republic, September 12-16, 2016, Proceedings</em>, edited by Petr Sojka, Aleš Horák, Ivan Kopeček, and Karel Pala, 367–74. Cham: Springer International Publishing. <a href="https://doi.org/10.1007/978-3-319-45510-5_42">https://doi.org/10.1007/978-3-319-45510-5_42</a>.
</div>
<div id="ref-Brand_2021" class="csl-entry" role="listitem">
Brand, James, Jen Hay, Lynn Clark, Kevin Watson, and Márton Sóskuthy. 2021. <span>‘Systematic Co-Variation of Monophthongs Across Speakers of New Zealand English’</span>. <em>Journal of Phonetics</em> 88 (September): 101096. <a href="https://doi.org/10.1016/j.wocn.2021.101096">https://doi.org/10.1016/j.wocn.2021.101096</a>.
</div>
<div id="ref-brms2017" class="csl-entry" role="listitem">
Bürkner, Paul-Christian. 2017. <span>‘<span class="nocase">brms</span>: An <span>R</span> Package for <span>Bayesian</span> Multilevel Models Using <span>Stan</span>’</span>. <em>Journal of Statistical Software</em> 80 (1): 1–28. <a href="https://doi.org/10.18637/jss.v080.i01">https://doi.org/10.18637/jss.v080.i01</a>.
</div>
<div id="ref-brms2018" class="csl-entry" role="listitem">
———. 2018. <span>‘Advanced <span>Bayesian</span> Multilevel Modeling with the <span>R</span> Package <span class="nocase">brms</span>’</span>. <em>The R Journal</em> 10 (1): 395–411. <a href="https://doi.org/10.32614/RJ-2018-017">https://doi.org/10.32614/RJ-2018-017</a>.
</div>
<div id="ref-brms2021" class="csl-entry" role="listitem">
———. 2021. <span>‘Bayesian Item Response Modeling in <span>R</span> with <span class="nocase">brms</span> and <span>Stan</span>’</span>. <em>Journal of Statistical Software</em> 100 (5): 1–54. <a href="https://doi.org/10.18637/jss.v100.i05">https://doi.org/10.18637/jss.v100.i05</a>.
</div>
<div id="ref-geomtextpath" class="csl-entry" role="listitem">
Cameron, Allan, and Teun van den Brand. 2025. <em><span class="nocase">geomtextpath</span>: Curved Text in <span>‘<span class="nocase">ggplot2</span>’</span></em>. <a href="https://CRAN.R-project.org/package=geomtextpath">https://CRAN.R-project.org/package=geomtextpath</a>.
</div>
<div id="ref-qs2" class="csl-entry" role="listitem">
Ching, Travers. 2025. <em>Qs2: Efficient Serialization of r Objects</em>. <a href="https://CRAN.R-project.org/package=qs2">https://CRAN.R-project.org/package=qs2</a>.
</div>
<div id="ref-fromont-hay-2012-labb" class="csl-entry" role="listitem">
Fromont. 2012. <span>‘<span>L</span>a<span>BB</span>-<span>CAT</span>: An Annotation Store’</span>. In <em>Proceedings of the Australasian Language Technology Association Workshop 2012</em>, edited by Cook, 113–17. Dunedin, New Zealand. <a href="https://aclanthology.org/U12-1015">https://aclanthology.org/U12-1015</a>.
</div>
<div id="ref-nzilbblabbcat" class="csl-entry" role="listitem">
Fromont, Robert. 2025. <em><span class="nocase">nzilbb.labbcat</span>: Accessing Data Stored in <span>‘<span>LaBB-CAT</span>’</span> Instances</em>. <a href="https://CRAN.R-project.org/package=nzilbb.labbcat">https://CRAN.R-project.org/package=nzilbb.labbcat</a>.
</div>
<div id="ref-bayesplot2025" class="csl-entry" role="listitem">
Gabry, Jonah, and Tristan Mahr. 2025. <span>‘<span class="nocase">bayesplot</span>: Plotting for Bayesian Models’</span>. <a href="https://mc-stan.org/bayesplot/">https://mc-stan.org/bayesplot/</a>.
</div>
<div id="ref-bayesplot2019" class="csl-entry" role="listitem">
Gabry, Jonah, Daniel Simpson, Aki Vehtari, Michael Betancourt, and Andrew Gelman. 2019. <span>‘Visualization in Bayesian Workflow’</span>. <em>J. R. Stat. Soc. A</em> 182: 389–402. <a href="https://doi.org/10.1111/rssa.12378">https://doi.org/10.1111/rssa.12378</a>.
</div>
<div id="ref-glue" class="csl-entry" role="listitem">
Hester, Jim, and Jennifer Bryan. 2024. <em><span class="nocase">glue</span>: Interpreted String Literals</em>. <a href="https://glue.tidyverse.org/">https://glue.tidyverse.org/</a>.
</div>
<div id="ref-DiagrammeR" class="csl-entry" role="listitem">
Iannone, Richard, and Olivier Roy. 2024. <em><span>DiagrammeR</span>: Graph/Network Visualization</em>. <a href="https://CRAN.R-project.org/package=DiagrammeR">https://CRAN.R-project.org/package=DiagrammeR</a>.
</div>
<div id="ref-ggcorrplot" class="csl-entry" role="listitem">
Kassambara, Alboukadel. 2023. <em><span class="nocase">ggcorrplot</span>: Visualization of a Correlation Matrix Using <span>‘<span class="nocase">ggplot2</span>’</span></em>. <a href="https://CRAN.R-project.org/package=ggcorrplot">https://CRAN.R-project.org/package=ggcorrplot</a>.
</div>
<div id="ref-ggdist2024" class="csl-entry" role="listitem">
Kay, Matthew. 2024a. <span>‘<span class="nocase">ggdist</span>: Visualizations of Distributions and Uncertainty in the Grammar of Graphics’</span>. <em>IEEE Transactions on Visualization and Computer Graphics</em> 30 (1): 414–24. <a href="https://doi.org/10.1109/TVCG.2023.3327195">https://doi.org/10.1109/TVCG.2023.3327195</a>.
</div>
<div id="ref-tidybayes" class="csl-entry" role="listitem">
———. 2024b. <em><span class="nocase">tidybayes</span>: Tidy Data and Geoms for <span>Bayesian</span> Models</em>. <a href="https://doi.org/10.5281/zenodo.1308151">https://doi.org/10.5281/zenodo.1308151</a>.
</div>
<div id="ref-ggdist2025" class="csl-entry" role="listitem">
———. 2025. <em><span class="nocase">ggdist</span>: Visualizations of Distributions and Uncertainty</em>. <a href="https://doi.org/10.5281/zenodo.3879620">https://doi.org/10.5281/zenodo.3879620</a>.
</div>
<div id="ref-modelbased" class="csl-entry" role="listitem">
Makowski, Dominique, Mattan S. Ben-Shachar, Brenton M. Wiernik, Indrajeet Patil, Rémi Thériault, and Daniel Lüdecke. 2025. <span>‘<span class="nocase">modelbased</span>: An <span>R</span> Package to Make the Most Out of Your Statistical Models Through Marginal Means, Marginal Effects, and Model Predictions.’</span> <em>Journal of Open Source Software</em> 10 (109): 7969. <a href="https://doi.org/10.21105/joss.07969">https://doi.org/10.21105/joss.07969</a>.
</div>
<div id="ref-here" class="csl-entry" role="listitem">
Müller, Kirill. 2020. <em><span class="nocase">here</span>: A Simpler Way to Find Your Files</em>. <a href="https://CRAN.R-project.org/package=here">https://CRAN.R-project.org/package=here</a>.
</div>
<div id="ref-ggforce" class="csl-entry" role="listitem">
Pedersen, Thomas Lin. 2025. <em><span class="nocase">ggforce</span>: Accelerating <span>‘<span class="nocase">ggplot2</span>’</span></em>. <a href="https://CRAN.R-project.org/package=ggforce">https://CRAN.R-project.org/package=ggforce</a>.
</div>
<div id="ref-scico" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, and Fabio Crameri. 2023. <em><span class="nocase">scico</span>: Colour Palettes Based on the Scientific Colour-Maps</em>. <a href="https://CRAN.R-project.org/package=scico">https://CRAN.R-project.org/package=scico</a>.
</div>
<div id="ref-base" class="csl-entry" role="listitem">
R Core Team. 2024. <em><span>R</span>: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-ggrepel" class="csl-entry" role="listitem">
Slowikowski, Kamil. 2024. <em><span class="nocase">ggrepel</span>: Automatically Position Non-Overlapping Text Labels with <span>‘<span class="nocase">ggplot2</span>’</span></em>. <a href="https://CRAN.R-project.org/package=ggrepel">https://CRAN.R-project.org/package=ggrepel</a>.
</div>
<div id="ref-itsadug" class="csl-entry" role="listitem">
van Rij, Jacolien, Martijn Wieling, R. Harald Baayen, and Hedderik van Rijn. 2022. <span>‘<span class="nocase">itsadug</span>: Interpreting Time Series and Autocorrelated Data Using GAMMs’</span>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>‘Welcome to the <span class="nocase">tidyverse</span>’</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-nzilbbvowels" class="csl-entry" role="listitem">
Wilson Black, Joshua, James Brand, Jen Hay, and Lynn Clark. 2023. <span>‘Using Principal Component Analysis to Explore Co‐variation of Vowels’</span>. <em>Language and Linguistics Compass</em> 17 (1): e12479. <a href="https://doi.org/10.1111/lnc3.12479">https://doi.org/10.1111/lnc3.12479</a>.
</div>
<div id="ref-mgcv2003" class="csl-entry" role="listitem">
Wood, S. N. 2003. <span>‘Thin-Plate Regression Splines’</span>. <em>Journal of the Royal Statistical Society (B)</em> 65 (1): 95–114. <a href="https://doi.org/10.1111/1467-9868.00374">https://doi.org/10.1111/1467-9868.00374</a>.
</div>
<div id="ref-mgcv2004" class="csl-entry" role="listitem">
———. 2004. <span>‘Stable and Efficient Multiple Smoothing Parameter Estimation for Generalized Additive Models’</span>. <em>Journal of the American Statistical Association</em> 99 (467): 673–86. <a href="https://doi.org/10.1198/016214504000000980">https://doi.org/10.1198/016214504000000980</a>.
</div>
<div id="ref-mgcv2011" class="csl-entry" role="listitem">
———. 2011. <span>‘Fast Stable Restricted Maximum Likelihood and Marginal Likelihood Estimation of Semiparametric Generalized Linear Models’</span>. <em>Journal of the Royal Statistical Society (B)</em> 73 (1): 3–36. <a href="https://doi.org/10.1111/j.1467-9868.2010.00749.x">https://doi.org/10.1111/j.1467-9868.2010.00749.x</a>.
</div>
<div id="ref-mgcv2017" class="csl-entry" role="listitem">
———. 2017. <em>Generalized <span>A</span>dditive <span>M</span>odels: An Introduction with <span>R</span></em>. 2nd ed. Chapman; Hall/CRC.
</div>
<div id="ref-mgcv2016" class="csl-entry" role="listitem">
Wood, S. N., N. Pya, and B. Säfken. 2016. <span>‘Smoothing Parameter and Model Selection for General Smooth Models (with Discussion)’</span>. <em>Journal of the American Statistical Association</em> 111: 1548–75. <a href="https://doi.org/10.1080/01621459.2016.1180986">https://doi.org/10.1080/01621459.2016.1180986</a>.
</div>
<div id="ref-knitr2014" class="csl-entry" role="listitem">
Xie, Yihui. 2014. <span>‘<span class="nocase">knitr</span>: A Comprehensive Tool for Reproducible Research in <span>R</span>’</span>. In <em>Implementing Reproducible Computational Research</em>, edited by Victoria Stodden, Friedrich Leisch, and Roger D. Peng. Chapman; Hall/CRC.
</div>
<div id="ref-knitr2015" class="csl-entry" role="listitem">
———. 2015. <em>Dynamic Documents with <span>R</span> and Knitr</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-knitr2024" class="csl-entry" role="listitem">
———. 2024. <em><span class="nocase">knitr</span>: A General-Purpose Package for Dynamic Report Generation in r</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-rmarkdown2018" class="csl-entry" role="listitem">
Xie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. <em>R Markdown: The Definitive Guide</em>. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown">https://bookdown.org/yihui/rmarkdown</a>.
</div>
<div id="ref-rmarkdown2020" class="csl-entry" role="listitem">
Xie, Yihui, Christophe Dervieux, and Emily Riederer. 2020. <em>R Markdown Cookbook</em>. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown-cookbook">https://bookdown.org/yihui/rmarkdown-cookbook</a>.
</div>
<div id="ref-kableExtra" class="csl-entry" role="listitem">
Zhu, Hao. 2024. <em><span class="nocase">kableExtra</span>: Construct Complex Table with <span>‘<span class="nocase">kable</span>’</span> and Pipe Syntax</em>. <a href="https://CRAN.R-project.org/package=kableExtra">https://CRAN.R-project.org/package=kableExtra</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We did not end up using this variable in our analysis but it may be useful for post-hoc analysis or model criticism.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<div class="bottom-logo">
  <img src="images/NZILBB-small.svg" width="5%">
</div>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>